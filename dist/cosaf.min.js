var J=class{#e=-1;#t="";userObject=null;solverObject=null;setIndex(e){this.#e=e}setName(e){this.#t=e}index(){return this.#e}name(){return this.#t}};var fe=class s extends J{static#e=Number.MIN_VALUE;#t;#r;#n=s.#e;#i=[];constructor(e,t){super(),this.#t=e,this.#r=t}toString(){let e=this.name(),t=e?`(${e})`:"",r=this.isEmpty()?"<empty>":""+this.value();return`x${this.index()}${t} = ${r}`}size(){return this.#i.length}at(e){return this.#i.at(e)}has(e){return this.#i.includes(e)}indexOf(e){return this.#i.indexOf(e)}neighbors(){let e=[];for(let t of this.#i)for(let r of t)r!==this&&e.push(r);return e}[Symbol.iterator](){return this.#i[Symbol.iterator]()}owner(){return this.#t}connect(e){if(this.#i.includes(e))throw new RangeError;this.#i.push(e)}disconnect(e){if(!this.#i.includes(e))throw new RangeError;this.#i=this.#i.filter(t=>t!==e)}domain(e){if(e===void 0)return this.#r;this.#r=e,this.clear()}assign(e){this.#n=e}clear(){this.assign(s.#e)}value(){return this.#n}isEmpty(){return this.value()===s.#e}};var ee=class{random(){return this.at(Math.floor(Math.random()*this.size()))}};var Oe=class extends ee{#e;#t;constructor(e,t){super(),this.#e=e|0,this.#t=t|0}contains(e){return this.#e<=e&&e<=this.#t}indexOf(e){return this.#e<=e&&e<=this.#t?e-this.#e:-1}size(){return this.#t-this.#e+1}at(e){return this.#e+e}[Symbol.iterator](){let e=this.#e,t=this.#t;return{next(){return e<=t?{value:e++,done:!1}:{value:null,done:!0}}}}};var Ne=class extends ee{#e;constructor(e){super(),this.#e=[...e]}contains(e){return this.#e.includes(e)}indexOf(e){return this.#e.indexOf(e)}size(){return this.#e.length}at(e){return this.#e[e]}[Symbol.iterator](){return this.#e[Symbol.iterator]()}};var g=class s extends J{static UNDEFINED=-1;rel;constructor(e){super(),this.rel=e}crispRelation(){return this.rel}fuzzyRelation(){return this.rel}isFuzzy(){return"satisfactionDegree"in this.rel}toString(){let e=this.name(),t=e?`(${e})`:"",r=this.satisfactionDegree(),n=r===s.UNDEFINED?"UNDEFINED":""+r;return`c${this.index()}${t} = ${n}`}};var Ie=class extends g{#e=[];constructor(e,t){super(e),this.#e=[t]}size(){return 1}at(e){return this.#e.at(e)}has(e){return e===this.#e[0]}indexOf(e){return e===this.#e[0]?0:-1}neighbors(){let e=[];for(let t of this.#e[0])t!==this&&e.push(t);return e}[Symbol.iterator](){return this.#e[Symbol.iterator]()}emptyVariableSize(){return this.#e[0].isEmpty()?1:0}isDefined(){return!this.#e[0].isEmpty()}isSatisfied(){return this.#e[0].isEmpty()?g.UNDEFINED:this.crispRelation().isSatisfied(this.#e[0].value())?1:0}satisfactionDegree(){return this.#e[0].isEmpty()?g.UNDEFINED:this.fuzzyRelation().satisfactionDegree(this.#e[0].value())}highestConsistencyDegree(){let e=this.satisfactionDegree();if(e!==g.UNDEFINED)return e;let t=0;for(let r of this.#e[0].domain()){let n=this.fuzzyRelation().satisfactionDegree(r);if(n>t&&(t=n),t===1)break}return t}lowestConsistencyDegree(){let e=this.satisfactionDegree();if(e!==g.UNDEFINED)return e;let t=1;for(let r of this.#e[0].domain()){let n=this.fuzzyRelation().satisfactionDegree(r);if(n<t&&(t=n),t===0)break}return t}};var ke=class extends g{#e=[];constructor(e,t,r){super(e),this.#e=[t,r]}size(){return 2}at(e){return this.#e.at(e)}has(e){return this.#e[0]===e||this.#e[1]===e}indexOf(e){return e===this.#e[0]?0:e===this.#e[1]?1:-1}neighbors(){let e=[];for(let t of this.#e[0])t!==this&&e.push(t);for(let t of this.#e[1])t!==this&&e.push(t);return e}[Symbol.iterator](){return this.#e[Symbol.iterator]()}emptyVariableSize(){let e=0;return this.#e[0].isEmpty()&&++e,this.#e[1].isEmpty()&&++e,e}isDefined(){return!this.#e[0].isEmpty()&&!this.#e[1].isEmpty()}isSatisfied(){return this.#e[0].isEmpty()||this.#e[1].isEmpty()?g.UNDEFINED:this.crispRelation().isSatisfied(this.#e[0].value(),this.#e[1].value())?1:0}satisfactionDegree(){return this.#e[0].isEmpty()||this.#e[1].isEmpty()?g.UNDEFINED:this.fuzzyRelation().satisfactionDegree(this.#e[0].value(),this.#e[1].value())}highestConsistencyDegree(){let e=this.satisfactionDegree();if(e!==g.UNDEFINED)return e;let t=0,r=this.#e[0].value(),n=this.#e[1].value(),i=this.#e[0].domain(),o=this.#e[1].domain();if(this.#e[0].isEmpty()&&!this.#e[1].isEmpty())for(let a of i){let u=this.fuzzyRelation().satisfactionDegree(a,n);if(u>t&&(t=u),t===1)break}else if(!this.#e[0].isEmpty()&&this.#e[1].isEmpty())for(let a of o){let u=this.fuzzyRelation().satisfactionDegree(r,a);if(u>t&&(t=u),t===1)break}else for(let a of i)for(let u of o){let m=this.fuzzyRelation().satisfactionDegree(a,u);if(m>t&&(t=m),t===1)break}return t}lowestConsistencyDegree(){let e=this.satisfactionDegree();if(e!==g.UNDEFINED)return e;let t=1,r=this.#e[0].value(),n=this.#e[1].value(),i=this.#e[0].domain(),o=this.#e[1].domain();if(this.#e[0].isEmpty()&&!this.#e[1].isEmpty())for(let a of i){let u=this.fuzzyRelation().satisfactionDegree(a,n);if(u<t&&(t=u),t===0)break}else if(!this.#e[0].isEmpty()&&this.#e[1].isEmpty())for(let a of o){let u=this.fuzzyRelation().satisfactionDegree(r,a);if(u<t&&(t=u),t===0)break}else for(let a of i)for(let u of o){let m=this.fuzzyRelation().satisfactionDegree(a,u);if(m<t&&(t=m),t===0)break}return t}};var Fe=class extends g{#e=[];constructor(e,t,r,n){super(e),this.#e=[t,r,n]}size(){return 3}at(e){return this.#e.at(e)}has(e){return this.#e[0]===e||this.#e[1]===e||this.#e[2]===e}indexOf(e){return e===this.#e[0]?0:e===this.#e[1]?1:e===this.#e[2]?2:-1}neighbors(){let e=[];for(let t of this.#e[0])t!==this&&e.push(t);for(let t of this.#e[1])t!==this&&e.push(t);for(let t of this.#e[2])t!==this&&e.push(t);return e}[Symbol.iterator](){return this.#e[Symbol.iterator]()}emptyVariableSize(){let e=0;return this.#e[0].isEmpty()&&++e,this.#e[1].isEmpty()&&++e,this.#e[2].isEmpty()&&++e,e}isDefined(){return!this.#e[0].isEmpty()&&!this.#e[1].isEmpty()&&!this.#e[2].isEmpty()}isSatisfied(){return this.#e[0].isEmpty()||this.#e[1].isEmpty()||this.#e[2].isEmpty()?g.UNDEFINED:this.crispRelation().isSatisfied(this.#e[0].value(),this.#e[1].value(),this.#e[2].value())?1:0}satisfactionDegree(){return this.#e[0].isEmpty()||this.#e[1].isEmpty()||this.#e[2].isEmpty()?g.UNDEFINED:this.fuzzyRelation().satisfactionDegree(this.#e[0].value(),this.#e[1].value(),this.#e[2].value())}highestConsistencyDegree(){let e=this.satisfactionDegree();if(e!==g.UNDEFINED)return e;let t=1,r=this.#e[0].value(),n=this.#e[1].value(),i=this.#e[2].value(),o=this.#e[0].domain(),a=this.#e[1].domain(),u=this.#e[2].domain();if(this.#e[0].isEmpty()&&!this.#e[1].isEmpty()&&!this.#e[2].isEmpty())for(let m of o){let l=this.fuzzyRelation().satisfactionDegree(m,n,i);if(l>t&&(t=l),t===1)break}else if(!this.#e[0].isEmpty()&&this.#e[1].isEmpty()&&!this.#e[2].isEmpty())for(let m of a){let l=this.fuzzyRelation().satisfactionDegree(r,m,i);if(l>t&&(t=l),t===1)break}else if(!this.#e[0].isEmpty()&&!this.#e[1].isEmpty()&&this.#e[2].isEmpty())for(let m of u){let l=this.fuzzyRelation().satisfactionDegree(r,n,m);if(l>t&&(t=l),t===1)break}else if(this.#e[0].isEmpty()&&this.#e[1].isEmpty()&&!this.#e[2].isEmpty())for(let m of o)for(let l of a){let c=this.fuzzyRelation().satisfactionDegree(m,l,i);if(c>t&&(t=c),t===1)break}else if(this.#e[0].isEmpty()&&!this.#e[1].isEmpty()&&this.#e[2].isEmpty())for(let m of o)for(let l of u){let c=this.fuzzyRelation().satisfactionDegree(m,n,l);if(c>t&&(t=c),t===1)break}else if(!this.#e[0].isEmpty()&&this.#e[1].isEmpty()&&this.#e[2].isEmpty())for(let m of a)for(let l of u){let c=this.fuzzyRelation().satisfactionDegree(r,m,l);if(c>t&&(t=c),t===1)break}else for(let m of o)for(let l of a)for(let c of u){let f=this.fuzzyRelation().satisfactionDegree(m,l,c);if(f>t&&(t=f),t===1)break}return t}lowestConsistencyDegree(){let e=this.satisfactionDegree();if(e!==g.UNDEFINED)return e;let t=1,r=this.#e[0].value(),n=this.#e[1].value(),i=this.#e[2].value(),o=this.#e[0].domain(),a=this.#e[1].domain(),u=this.#e[2].domain();if(this.#e[0].isEmpty()&&!this.#e[1].isEmpty()&&!this.#e[2].isEmpty())for(let m of o){let l=this.fuzzyRelation().satisfactionDegree(m,n,i);if(l<t&&(t=l),t===0)break}else if(!this.#e[0].isEmpty()&&this.#e[1].isEmpty()&&!this.#e[2].isEmpty())for(let m of a){let l=this.fuzzyRelation().satisfactionDegree(r,m,i);if(l<t&&(t=l),t===0)break}else if(!this.#e[0].isEmpty()&&!this.#e[1].isEmpty()&&this.#e[2].isEmpty())for(let m of u){let l=this.fuzzyRelation().satisfactionDegree(r,n,m);if(l<t&&(t=l),t===0)break}else if(this.#e[0].isEmpty()&&this.#e[1].isEmpty()&&!this.#e[2].isEmpty())for(let m of o)for(let l of a){let c=this.fuzzyRelation().satisfactionDegree(m,l,i);if(c<t&&(t=c),t===0)break}else if(this.#e[0].isEmpty()&&!this.#e[1].isEmpty()&&this.#e[2].isEmpty())for(let m of o)for(let l of u){let c=this.fuzzyRelation().satisfactionDegree(m,n,l);if(c<t&&(t=c),t===0)break}else if(!this.#e[0].isEmpty()&&this.#e[1].isEmpty()&&this.#e[2].isEmpty())for(let m of a)for(let l of u){let c=this.fuzzyRelation().satisfactionDegree(r,m,l);if(c<t&&(t=c),t===0)break}else for(let m of o)for(let l of a)for(let c of u){let f=this.fuzzyRelation().satisfactionDegree(m,l,c);if(f<t&&(t=f),t===0)break}return t}};var He=class extends g{#e;#t;constructor(e,...t){super(e),this.#e=[...t],this.#t=new Array(this.#e.length)}size(){return this.#e.length}at(e){return this.#e.at(e)}has(e){return this.#e.includes(e)}indexOf(e){return this.#e.indexOf(e)}neighbors(){let e=[];for(let t of this.#e)for(let r of t)r!==this&&e.push(r);return e}[Symbol.iterator](){return this.#e[Symbol.iterator]()}emptyVariableSize(){let e=0;for(let t of this.#e)t.isEmpty()&&++e;return e}isDefined(){for(let e of this.#e)if(e.isEmpty())return!1;return!0}isSatisfied(){for(let e=0;e<this.#e.length;++e){let t=this.#e[e];if(t.isEmpty())return-1;this.#t[e]=t.value()}return this.crispRelation().isSatisfied(...this.#t)?1:0}satisfactionDegree(){for(let e=0;e<this.#e.length;++e){let t=this.#e[e];if(t.isEmpty())return g.UNDEFINED;this.#t[e]=t.value()}return this.fuzzyRelation().satisfactionDegree(...this.#t)}highestConsistencyDegree(){let e=this.satisfactionDegree();if(e!==g.UNDEFINED)return e;let t=new Array(this.emptyVariableSize()),r=0;for(let n=0;n<this.#e.length;++n){let i=this.#e[n];i.isEmpty()?t[r++]=n:this.#t[n]=i.value()}return this.checkHCD(t,0,0)}lowestConsistencyDegree(){let e=this.satisfactionDegree();if(e!==g.UNDEFINED)return e;let t=new Array(this.emptyVariableSize()),r=0;for(let n=0;n<this.#e.length;++n){let i=this.#e[n];i.isEmpty()?t[r++]=n:this.#t[n]=i.value()}return this.checkLCD(t,0,1)}checkHCD(e,t,r){let n=e[t],i=this.#e[n].domain();if(t===e.length-1)for(let o of i){this.#t[n]=o;let a=this.fuzzyRelation().satisfactionDegree(...this.#t);if(a>r&&(r=a),r===1)break}else for(let o of i)this.#t[n]=o,r=this.checkLCD(e,t+1,r);return r}checkLCD(e,t,r){let n=e[t],i=this.#e[n].domain();if(t===e.length-1)for(let o of i){this.#t[n]=o;let a=this.fuzzyRelation().satisfactionDegree(...this.#t);if(a<r&&(r=a),r===0)break}else for(let o of i)this.#t[n]=o,r=this.checkLCD(e,t+1,r);return r}};var te=class{#e=(e,t)=>new fe(e,t);#t=(e,t)=>t.length===1?new Ie(e,t[0]):t.length===2?new ke(e,t[0],t[1]):t.length===3?new Fe(e,t[0],t[1],t[2]):new He(e,...t);#r=!1;#n=[];#i=[];setVariableFactory(e){this.#e=e}setConstraintFactory(e){this.#t=e}addVariable(e){e.setIndex(this.#n.length),this.#n.push(e)}createDomain(e){return"values"in e?new Ne(e.values):"min"in e&&"max"in e?new Oe(e.min,e.max):null}createVariable(e){if("variable"in e){let t=this.#e(this,e.variable.domain());return this.addVariable(t),t.setName(t.name()),t.assign(t.value()),t}else{if(e.value!==void 0&&!e.domain.contains(e.value))throw new Error;let t=this.#e(this,e.domain);return this.addVariable(t),e.name&&t.setName(e.name),e.value&&t.assign(e.value),t}}createConstraint(e){for(let r of e.variables)if(r.owner()!==this)return null;let t=this.#t(e.relation,e.variables);t.setIndex(this.#i.length),this.#i.push(t);for(let r of e.variables)r.connect(t);return t.isFuzzy()&&(this.#r=!0),"name"in e&&t.setName(e.name),t}removeConstraint(e){let t=this.#i.indexOf(e);this.#i.splice(t,1);for(let r=t;r<this.#i.length;++r)this.#i[r].setIndex(r);for(let r of e)r.disconnect(e);this.#r=!1;for(let r of this.#i)if(r.isFuzzy()){this.#r=!0;break}}clearAllVariables(){for(let e of this.#n)e.clear()}reverseVariables(){this.#n.reverse();for(let e=0;e<this.#n.length;++e)this.#n[e].setIndex(e)}sortVariables(e){this.#n.sort(e);for(let t=0;t<this.#n.length;++t)this.#n[t].setIndex(t)}variableSize(){return this.#n.length}variableAt(e){return this.#n[e]}variableOf(e){for(let t of this.#n)if(t.name()===e)return t;return null}hasVariable(e){return this.#n.includes(e)}variables(){return this.#n}constraintSize(){return this.#i.length}constraintAt(e){return this.#i[e]}constraintOf(e){for(let t of this.#i)if(t.name()===e)return t;return null}hasConstraint(e){return this.#i.includes(e)}constraints(){return this.#i}constraintsBetween(e,t){let r=[];for(let n of e)n.has(t)&&r.push(n);return r}constraintsWithWorstSatisfactionDegree(){let e=[],t=1;for(let r of this.#i){let n=r.satisfactionDegree();n<t?(t=n,e.length=0,e.push(r)):n-t<Number.MIN_VALUE*10&&e.push(r)}return[e,t]}worstSatisfactionDegree(){let e=1;for(let t of this.#i){let r=t.satisfactionDegree();if(r===g.UNDEFINED)return g.UNDEFINED;r<e&&(e=r)}return e}averageSatisfactionDegree(){let e=0;for(let t of this.#i)e+=t.satisfactionDegree();return e=e/this.#i.length,e}emptyVariableSize(){let e=0;for(let t of this.#n)t.isEmpty()&&e++;return e}constraintDensity(){return this.constraintSize()/this.variableSize()}hasEmptyDomain(){for(let e of this.#n)if(e.domain().size()===0)return!0;return!1}isFuzzy(){return this.#r}};var z=class{debug=!0;#e=e=>console.log(e);pro;iterLimit=null;timeLimit=null;targetDeg=.8;#t=[];constructor(e){this.pro=e}name(){return""}exec(){return!1}setIterationLimit(e=null){this.iterLimit=e}setTimeLimit(e=null){this.timeLimit=e}setTargetRate(e=null){this.targetDeg=e}solve(){return this.exec()}addListener(e){this.#t.push(e)}removeListener(e){this.#t.splice(this.#t.indexOf(e),1)}foundSolution(e,t){let r=!1;for(let n of this.#t)n(e,t)&&(r=!0);return r}setDebugMode(e){this.debug=e}setDebugOutput(e){this.#e=e}debugOutput(e){this.debug&&this.#e(e)}};var $=class{#e;#t;constructor(e){if("assignment"in e)this.#e=e.assignment.variable(),this.#t=e.assignment.value();else if("variable"in e)this.#e=e.variable,this.#t=e.value??e.variable.value();else throw new RangeError}apply(){this.#e.assign(this.#t)}toString(){return`v${this.#e.index()} <- ${this.#t}`}value(){return this.#t}variable(){return this.#e}};var x=class s{static fromVariables(e){let t=new s;return t.setVariables(e),t}#e=[];constructor(){}setProblem(e){this.#e.length=0;for(let t of e.variables())this.#e.push(new $({variable:t,value:t.value()}))}setAssignmentList(e){this.#e.length=0;for(let t of e)this.#e.push(new $({variable:t.variable(),value:t.value()}))}setVariables(e){this.#e.length=0;for(let t of e)this.#e.push(new $({variable:t,value:t.value()}))}addVariable(e,t=null){this.#e.push(new $({variable:e,value:t}))}apply(){for(let e of this.#e)e.apply()}clear(){this.#e.length=0}isEmpty(){return this.#e.length===0}size(){return this.#e.length}differenceSize(){let e=0;for(let t of this.#e)t.variable().value()!==t.value()&&++e;return e}at(e){return this.#e[e]}[Symbol.iterator](){return this.#e[Symbol.iterator]()}random(){return this.#e[Math.floor(Math.random()*this.#e.length)]}};var G=class s{static#e=-1;#t;#r=0;constructor(e){this.#t=new Array(e),this.#t.fill(s.#e)}hiddenSize(){return this.#r}hide(e,t){this.#t[e]===s.#e&&++this.#r,this.#t[e]=t}isEmpty(){return this.#t.length===this.#r}isValueHidden(e){return this.#t[e]!==s.#e}reveal(e){for(let t=0;t<this.#t.length;++t)this.#t[t]===e&&(this.#t[t]=s.#e,--this.#r)}revealAll(){this.#t.fill(s.#e),this.#r=0}};var be=class s extends z{static CONTINUE=0;static TERMINATE=1;#e;#t=new x;#r=[];#n=0;#i=0;#s=0;#u=!1;#o=0;#a;#l;#m;#f=!1;constructor(e,t=null){super(e),this.#e=[...this.pro.variables()],this.#a=new Array(this.pro.variableSize()),this.#c(),this.#m=new Array(this.pro.constraintSize());let r=[];for(let n of this.pro.constraints())n.size()===1&&r.push(n);this.#l=[...r],t&&(this.#n=t)}name(){return"Forward Checking for Fuzzy CSPs"}setUsingMinimumRemainingValuesHeuristics(e){this.#u=e}setIncrementStepOfWorstSatisfactionDegree(e){this.#o=e}setIntensivePruning(e){this.#f=e}setTargetRate(e=null){if(this.targetDeg=e,this.targetDeg===null)this.#n=0;else{let t=Number.MIN_VALUE;for(this.#n=this.targetDeg-t;this.#n>=this.targetDeg;)t*=10,this.#n=this.targetDeg-t}}#c(){this.#r=[];for(let e=0;e<this.#e.length;++e){this.#r.push(new Array(this.#e.length));for(let t=0;t<this.#e.length;++t)t<e&&(this.#r[e][t]=this.pro.constraintsBetween(this.#e[t],this.#e[e]))}}#b(e,t){return e<t?this.#r[t][e]:this.#r[e][t]}#p(){for(let e of this.#l){let t=e.at(0),r=t.value(),n=t.domain(),i=t.solverObject;for(let o=0,a=n.size();o<a;++o)t.assign(n.at(o)),e.satisfactionDegree()<=this.#n&&i.hide(o,-1);if(t.assign(r),i.isEmpty())return!1}return!0}#g(e,t,r){let n=t.domain(),i=t.solverObject;for(let o=0,a=n.size();o<a;++o)i.isValueHidden(o)||(t.assign(n.at(o)),r.satisfactionDegree()<=this.#n&&i.hide(o,e));return t.clear(),!i.isEmpty()}#d(e,t,r){let n=t.domain(),i=t.solverObject,o=null;for(let m of r)if(m.isEmpty()&&m!==t){o=m;break}let a=o.domain(),u=o.solverObject;e:for(let m=0,l=n.size();m<l;++m)if(!i.isValueHidden(m)){t.assign(n.at(m));for(let c=0,f=a.size();c<f;++c){if(u.isValueHidden(c))continue;if(o.assign(a.at(c)),r.satisfactionDegree()>this.#n)continue e}i.hide(m,e)}return o.clear(),t.clear(),!i.isEmpty()}#y(e,t,r){let n=t.domain(),i=t.solverObject,o=null,a=null;for(let f of r)if(f.isEmpty()&&f!==t)if(o===null)o=f;else{a=f;break}let u=o.domain(),m=a.domain(),l=o.solverObject,c=a.solverObject;e:for(let f=0,b=n.size();f<b;++f)if(!i.isValueHidden(f)){t.assign(n.at(f));for(let p=0,h=u.size();p<h;++p)if(!l.isValueHidden(p)){o.assign(u.at(p));for(let L=0,d=m.size();L<d;++L){if(c.isValueHidden(L))continue;if(a.assign(m.at(L)),r.satisfactionDegree()>this.#n)continue e}}i.hide(f,e)}return a.clear(),o.clear(),t.clear(),!i.isEmpty()}#h(e,t,r,n){let i=t.domain(),o=t.solverObject,a=new Array(n-1),u=0;for(let l of r)l.isEmpty()&&l!==t&&(a[u++]=l);let m=new Array(a.length);e:for(let l=0,c=i.size();l<c;++l)if(!o.isValueHidden(l)){t.assign(i.at(l)),m.fill(0);t:for(;;){let f=!1;for(let b=0;b<a.length;++b){let p=a[b].domain();if(a[b].solverObject.isValueHidden(m[b])){f=!0;break}a[b].assign(p.at(m[b]))}if(!f&&r.satisfactionDegree()>this.#n)continue e;for(let b=0;b<a.length&&(m[b]+=1,!(m[b]<a[b].domain().size()));++b)if(m[b]=0,b===a.length-1)break t}o.hide(l,e)}for(let l of a)l.clear();return t.clear(),!o.isEmpty()}#L(e,t){for(let r of this.#e){if(!r.isEmpty())continue;let n=this.#b(t,r.index());for(let i of n){let o=i.emptyVariableSize();if(o===1){if(!this.#g(e,r,i))return!1}else if(this.#f){if(o===2){if(!this.#d(e,r,i))return!1}else if(o===3){if(!this.#y(e,r,i))return!1}else if(o>3&&!this.#h(e,r,i,o))return!1}}}return!0}#C(e){this.#m.fill(!1);for(let t=0;t<this.#e.length;++t){let r=this.#e[t];if(r===e||r.isEmpty())continue;let n=this.#b(e.index(),t);for(let i of n){if(this.#m[i.index()])continue;let o=i.satisfactionDegree();if(o!==g.UNDEFINED&&o<=this.#n)return!1;this.#m[i.index()]=!0}}return!0}#z(){for(let e=0;e<this.#a.length;++e){let t=this.#a[e].index();for(let r=e+1;r<this.#a.length;++r){let n=this.#a[r],i=this.#b(t,n.index());for(let o of i){let a=n.value(),u=n.domain(),m=n.solverObject;for(let l=0,c=u.size();l<c;++l)m.isValueHidden(l)||(n.assign(u.at(l)),o.satisfactionDegree()<=this.#n&&m.hide(l,e));n.assign(a)}}}}#x(){let e=0,t=Number.MAX_VALUE;for(let r=0;r<this.#e.length;++r){let n=this.#e[r];if(!n.isEmpty())continue;let o=n.domain().size()-n.solverObject.hiddenSize();o<t&&(t=o,e=r)}return e}#T(e){let t=s.CONTINUE,r=this.#u?this.#x():e,n=this.#e[r],i=n.domain(),o=n.solverObject;this.#a[e]=n;for(let a=0,u=i.size();a<u;++a){if(o.isValueHidden(a))continue;if(this.iterLimit&&this.iterLimit<this.#i++||this.#s<Date.now()){t=s.TERMINATE;break}n.assign(i.at(a));for(let l of this.#e)l.solverObject.reveal(e);if(!this.#C(n)||!this.#L(e,r))continue;let m=e+1;if(t=m===this.#e.length-1?this.#V(m):this.#T(m),t===s.TERMINATE)break}if(t===s.CONTINUE)for(let a of this.#e)a.solverObject.reveal(e);return n.clear(),t}#V(e){let t=s.CONTINUE,r=this.#e[this.#u?this.#x():e],n=r.domain(),i=r.solverObject;this.#a[e]=r;for(let o=0,a=n.size();o<a;++o){if(i.isValueHidden(o))continue;if(this.iterLimit&&this.iterLimit<this.#i++||this.#s<Date.now()){t=s.TERMINATE;break}r.assign(n.at(o));let u=this.pro.worstSatisfactionDegree();if(u>this.#n){if(this.#n=u,this.#t.setProblem(this.pro),t=s.TERMINATE,this.targetDeg!==null&&this.targetDeg<=this.#n)break;this.#p(),this.#z()}}return r.clear(),t}exec(){this.#s=this.timeLimit===null?Number.MAX_VALUE:Date.now()+this.timeLimit,this.#i=0;for(let t of this.#e)t.solverObject=new G(t.domain().size());if(this.pro.clearAllVariables(),!this.#p())return!1;let e=!1;for(;;){if(this.#T(0)===s.TERMINATE){if(this.iterLimit&&this.iterLimit<this.#i++){this.debugOutput("stop: number of iterations has reached the limit");break}if(this.#s<Date.now()){this.debugOutput("stop: time limit has been reached");break}}if(this.#t.isEmpty())break;if(this.debugOutput(`	found a solution: ${this.#n}`),this.foundSolution(this.#t,this.#n)){e=!0;break}if(this.targetDeg===null)e=!0,this.#n+=this.#o;else if(this.targetDeg<=this.#n){this.debugOutput("stop: current degree is above the target"),e=!0;break}for(let r of this.#e)r.solverObject.revealAll()}this.#t.apply();for(let t of this.#e)t.solverObject=null;return e}};var he=class extends z{#e=!0;#t;#r=0;constructor(e){super(e),this.#t=new Array(this.pro.constraintSize()),this.#t.fill(1)}name(){return"Fuzzy Breakout"}setRandomness(e){this.#e=e}#n(e,t){let r=0;for(let n of e){let i=n.value(),o=0;for(let a of n)o+=(1-a.satisfactionDegree())*this.#t[a.index()];e:for(let a of n.domain()){if(i===a)continue;n.assign(a);let u=o;for(let m of n)if(u-=(1-m.satisfactionDegree())*this.#t[m.index()],u<r)continue e;u>r?(r=u,t.clear(),t.addVariable(n,a)):r!==0&&t.addVariable(n,a)}n.assign(i)}}#i(e){let t=new Set;for(let r of e)for(let n of r)t.add(n);return Array.from(t)}exec(){let e=this.timeLimit===null?Number.MAX_VALUE:Date.now()+this.timeLimit,t=0;for(let o of this.pro.variables())o.isEmpty()&&o.assign(o.domain().at(0));let r=this.pro.worstSatisfactionDegree(),n=new x,i=new x;for(;;){let[o,a]=this.pro.constraintsWithWorstSatisfactionDegree();if(this.debugOutput(`worst satisfaction degree: ${a}`),this.iterLimit&&this.iterLimit<t++){this.debugOutput("stop: number of iterations has reached the limit");break}if(e<Date.now()){this.debugOutput("stop: time limit has been reached");break}if(this.#r<a&&(i.setProblem(this.pro),this.#r=a,this.foundSolution(i,this.#r)))return!0;if(this.targetDeg&&this.targetDeg<=a)return this.debugOutput("stop: current degree is above the target"),!0;if(this.#n(this.#i(o),n),0<n.size()){let u=this.#e?n.random():n.at(0);u.apply(),n.clear(),this.debugOutput("	"+u)}else{for(let u of o)this.#t[u.index()]+=1;this.debugOutput("breakout")}}return this.targetDeg===null&&r<this.pro.worstSatisfactionDegree()}};var re=class s extends z{static REPAIR_THRESHOLD=0;#e=new Set;#t=new Set;#r=[];#n=[];#i=new Set;#s=0;#u=0;#o=!0;constructor(e){super(e);for(let t of this.pro.constraints())this.#r.push(new bt(t)),this.#n.push(null)}name(){return"SRS 3"}#a(e){let t=e.index();return this.#n[t]===null&&(this.#n[t]=e.neighbors()),this.#n[t]}#l(e){this.debugOutput("repair");let t=new x,r=e.satisfactionDegree(),n=this.pro.worstSatisfactionDegree(),i=e.satisfactionDegree();for(let o of e){let a=o.value();e:for(let u of o.domain()){if(a===u)continue;o.assign(u);let m=e.satisfactionDegree();if(!(r>m||i-m>s.REPAIR_THRESHOLD)){for(let l of o){if(l===e)continue;let c=l.satisfactionDegree();if(c!==g.UNDEFINED&&c<n)continue e}m>i&&(i=m,t.clear()),t.addVariable(o,u)}}o.assign(a)}if(t.size()>0){let o=this.#o?t.random():t.at(0);return o.apply(),this.debugOutput("	"+o),!0}return!1}#m(e){this.debugOutput("shrink");let t=!1;for(;;){if(e=e.parent(),this.#i.delete(e)){t=!0;break}if(!this.#l(e.parent().getObject()))break}let r=[];e.getDescendants(r);for(let n of r)n.clear(),this.#t.delete(n),this.#e.delete(n);t||this.#t.add(e)}#f(e){this.debugOutput("spread"),this.#e.add(e);for(let t of this.#a(e.getObject())){let r=this.#r[t.index()];!this.#e.has(r)&&!this.#t.has(r)&&(e.add(r),this.#t.add(r))}}#c(){this.debugOutput("srs");let[e]=this.pro.constraintsWithWorstSatisfactionDegree();for(let t of e){let r=this.#r[t.index()];r.setParent(null),this.#i.add(r)}this.#e.clear(),this.#t.clear();for(let t of this.#i)this.#t.add(t);for(;this.#i.size&&this.#t.size;){if(this.iterLimit&&this.iterLimit<this.#s++)return this.debugOutput("stop: number of iterations has reached the limit"),!1;if(this.#u<Date.now())return this.debugOutput("stop: time limit has been reached"),!1;let t=this.#t.values().next().value;if(this.#t.delete(t),this.#l(t.getObject())){if(this.#i.delete(t))continue;if(this.#l(t.parent().getObject())){this.#m(t);continue}}this.#f(t)}return!0}exec(){if(this.#u=this.timeLimit===null?Number.MAX_VALUE:Date.now()+this.timeLimit,this.#s=0,this.targetDeg&&this.targetDeg<=this.pro.worstSatisfactionDegree())return!0;let e=new x,t=!1;for(;!(!this.#c()||this.#i.size);){let n=this.pro.worstSatisfactionDegree();if(n!==-1){if(this.debugOutput(`	found a solution: ${n}	${this.targetDeg}`),e.setProblem(this.pro),this.foundSolution(e,n)){t=!0;break}if(this.targetDeg===null)t=!0;else if(this.targetDeg<=n){this.debugOutput("stop: current degree is above the target"),t=!0;break}}}return t}setRandomness(e){this.#o=e}},bt=class{#e=[];#t;#r;constructor(e){this.#t=null,this.#r=e}add(e){e.#t=this,this.#e.push(e)}clear(){for(let e of this.#e)e.#t=null;this.#e.length=0}getDescendants(e){e.push(this);for(let t of this.#e)t.getDescendants(e)}getObject(){return this.#r}parent(){return this.#t}setParent(e){this.#t=e}};var W=(n=>(n[n.TRICHROMACY=0]="TRICHROMACY",n[n.PROTANOPIA=1]="PROTANOPIA",n[n.DEUTERANOPIA=2]="DEUTERANOPIA",n[n.MONOCHROMACY=3]="MONOCHROMACY",n))(W||{});var pe=class{#e=50;#t=3.5;#r=4;#n=5;setMaximumDifference(e){return this.#e=e,this}getMaximumDifference(){return this.#e}setMaximumHueDifference(e){return this.#t=e,this}getMaximumHueDifference(){return this.#t}setMaximumToneDifference(e){return this.#r=e,this}getMaximumToneDifference(){return this.#r}setResolution(e){return this.#n=e,this}getResolution(){return this.#n}#i=!1;#s=!0;#u=!0;#o=!1;#a=20;#l=20;#m=20;#f=20;#c=!0;#b=!0;#p=.5;#g=!0;#d=.5;#y=!1;#h=.5;setVisionChecked(e,t,r,n){return this.#i=e,this.#s=t,this.#u=r,this.#o=n,this}doCheckVision(e){switch(e){case 0:return this.#i;case 1:return this.#s;case 2:return this.#u;case 3:return this.#o}}setTargetDifferences(e,t,r,n){return this.#a=e,this.#l=t,this.#m=r,this.#f=n,this}getTargetDifference(e){switch(e){case 0:return this.#a;case 1:return this.#l;case 2:return this.#m;case 3:return this.#f}}setRatioModeEnabled(e){return this.#c=e,this}isRatioModeEnabled(){return this.#c}setHuePreserved(e){return this.#b=e,this}doPreserveHue(){return this.#b}setHueTolerance(e){return this.#p=e,this}getHueTolerance(){return this.#p}setTonePreserved(e){return this.#g=e,this}doPreserveTone(){return this.#g}setToneTolerance(e){return this.#d=e,this}getToneTolerance(){return this.#d}setConspicuityChecked(e){this.#y=e}doCheckConspicuity(){return this.#y}setConspicuityRate(e){this.#h=e}getConspicuityRate(){return this.#h}#L=8e3;#C=.8;#z=0;#x=!1;setTimeLimit(e){return this.#L=e,this}getTimeLimit(){return this.#L}setTargetDesirability(e){return this.#C=e,this}getTargetDesirability(){return this.#C}setSolver(e){return this.#z=e,this}getSolverType(){return this.#z}setBottleneckResolved(e){return this.#x=e,this}isBottleneckResolved(){return this.#x}},ht=(r=>(r[r.FC=0]="FC",r[r.SRS3=1]="SRS3",r[r.FUZZY_BREAKOUT=2]="FUZZY_BREAKOUT",r))(ht||{});function _t(s,e){return[s[0]+e[0],s[1]+e[1],s[2]+e[2]]}function _e(s,e){return[s[0]-e[0],s[1]-e[1],s[2]-e[2]]}function Ue(s,e,t=.5){let r=1-t;return[s[0]*r+e[0]*t,s[1]*r+e[1]*t,s[2]*r+e[2]*t]}var _=class s{static E=.001;#e;#t;#r;#n;constructor(e,t){let r=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);this.#e=t[0]/r,this.#t=t[1]/r,this.#r=t[2]/r,this.#n=-this.#e*e[0]-this.#t*e[1]-this.#r*e[2]}side(e){let t=this.#e*e[0]+this.#t*e[1]+this.#r*e[2]+this.#n;return t<-s.E?-1:t>s.E?1:0}sides(e){let t=new Map;for(let r of e)t.set(r,this.side(r));return t}#i(e,t){let r=this.#e*(e[0]-t[0])+this.#t*(e[1]-t[1])+this.#r*(e[2]-t[2]);if(Math.abs(r)<.001)return null;let n=(this.#e*e[0]+this.#t*e[1]+this.#r*e[2]+this.#n)/r;return n<0||1<n?null:[e[0]+n*(t[0]-e[0]),e[1]+n*(t[1]-e[1]),e[2]+n*(t[2]-e[2])]}intersections(e){let t=new Map;for(let r of e){if(t.has(r))continue;let n=this.#i(r.getBegin(),r.getEnd());n&&(t.set(r,n),r.pair&&t.set(r.pair,n))}return t}};var K=class{#e;#t;next=null;pair=null;constructor(e){this.#e=e}setNext(e){this.next=e,this.#t=e.#e}getBegin(){return this.#e}getEnd(){return this.#t}};var U=class s{static E=.001;#e;constructor(e){let t=e.length;for(let r=0;r<t-1;++r)e[r].setNext(e[r+1]);e[t-1].setNext(e[0]),this.#e=e[0]}length(){let e=0,t=this.#e;do e+=1,t=t.next;while(t!==this.#e);return e}verticesOf(e,t,r){let n=[],i=this.#e;do{let o=i.getBegin();t.get(o)*e>=0&&n.push(o),r.has(i)&&n.push(r.get(i)),i=i.next}while(i!==this.#e);return n}countGridPoints(e,t,r){let n=0,i=this.#t(e,t,r);n+=i;for(let o=1;;++o){let a=this.#t(e,t+o*r,r);if(a===0)break;n+=a}for(let o=1;;++o){let a=this.#t(e,t-o*r,r);if(a===0)break;n+=a}return n}#t(e,t,r){let n=this.#n(t),[i,o]=n;i>o&&([i,o]=[o,i]);let a=0;i<e&&e<o&&(a+=1);for(let u=1;;++u){let m=a,l=e+u*r;if(i<l&&l<o&&(a+=1),a===m)break}for(let u=1;;++u){let m=a,l=e-u*r;if(i<l&&l<o&&(a+=1),a===m)break}return a}getGridPoints(e,t,r){let n=[],i=this.#e.getBegin()[2],o=this.#r(e,t,r);for(let a of o)n.push([a,t,i]);for(let a=1;;++a){let u=t+a*r,m=this.#r(e,u,r);if(m.length===0)break;for(let l of m)n.push([l,u,i])}for(let a=1;;++a){let u=t-a*r,m=this.#r(e,u,r);if(m.length===0)break;for(let l of m)n.push([l,u,i])}return n}#r(e,t,r){let n=this.#n(t),[i,o]=n;i>o&&([i,o]=[o,i]);let a=[];i<e&&e<o&&a.push(e);for(let u=1;;++u){let m=a.length,l=e+u*r;if(i<l&&l<o&&a.push(l),a.length===m)break}for(let u=1;;++u){let m=a.length,l=e-u*r;if(i<l&&l<o&&a.push(l),a.length===m)break}return a}#n(e){let t=[];for(let r=this.#e;;r=r.next){let n=s.#i(r,e);if(t.push(...n),r.next===this.#e)break}return s.#s(t)}static#i(e,t){let[r,n]=e.getBegin(),[i,o]=e.getEnd();if(t<Math.min(n,o)||Math.max(n,o)<t)return[];if(Math.abs(n-o)<s.E)return[r,i];let a=o-n,u=-(i-r),m=-a*r-u*n;return Math.abs(a)<s.E?[]:[-(u*t+m)/a]}static#s(e){if(e.length===0)return[];e.sort((n,i)=>n-i);let t=[],r=e[0];for(let n=1;n<e.length;n++)s.E<e[n]-e[n-1]&&(t.push(r),r=e[n]);return t.push(r),t}};var ne=class s{#e=[];#t=[];#r=[];static buildMesh(e,t){let r=new s;for(let n of e)r.#e.push([...n]);for(let n of t){let i=[];for(let o of n)i.push(new K(r.#e[o]));r.#t.push(...i),r.#r.push(new U(i))}return s.#n(r.#t),r}static#n(e){for(let t of e)if(t.pair===null){for(let r of e)if(!(t===r||r.pair!==null)&&t.getBegin()===r.getEnd()&&r.getBegin()===t.getEnd()){t.pair=r,r.pair=t;break}}}constructor(){}splitMesh(e,t){let r=e.side(t);if(r===0)return;let n=e.intersections(this.#t);if(n.size===0)return;let i=e.sides(this.#e),o=[],a=[],u=[];for(let l of this.#r){let c=l.verticesOf(r,i,n);if(c.length<=2)continue;let f=[];for(let b of c)o.includes(b)||o.push(b),f.push(new K(b));a.push(...f),u.push(new U(f))}s.#n(a);let m=a.filter(l=>l.pair===null);if(m.length>0){let l=s.#i(m);a.push(...l),u.push(new U(l))}this.#e=o,this.#r=u,this.#t=a}crossSection(e,t){let r=new _(e,t),n=r.side(_t(e,t));if(n===0)return null;let i=r.intersections(this.#t);if(i.size===0)return null;let o=r.sides(this.#e),a=[],u=[];for(let l of this.#r){let c=l.verticesOf(n,o,i);if(c.length<=2)continue;let f=[];for(let b of c)f.push(new K(b));a.push(...f),u.push(new U(f))}s.#n(a);let m=a.filter(l=>l.pair===null);if(m.length>0){let l=s.#i(m);if(l.length>2)return new U(l)}return null}static#i(e){let t=[],r=e[0];do{if(r.next===null)break;let n=r.next;for(;n&&!e.includes(n);)n=n.pair.next;let i=new K(n.getBegin());t.push(i),i.pair=r,r.pair=i,r=n}while(r!==e[0]);return t.reverse(),t}};var I=class s{static FACE_INDEXES=[[0,1,2,3],[1,0,4,5],[0,3,7,4],[2,1,5,6],[5,4,7,6],[3,2,6,7]];#e;#t=[];#r=[];constructor(e,t,r,n,i,o){this.#e=[[t,n,o],[e,n,o],[e,n,i],[t,n,i],[t,r,o],[e,r,o],[e,r,i],[t,r,i]]}addSite(e){this.#t.push([...e])}createCells(e=null,t=null){this.#r.length=0,!e&&!t?this.#n():e&&!t?this.#i(e):e&&t&&this.#s(e,t)}#n(){for(let e of this.#t){let t=ne.buildMesh(this.#e,s.FACE_INDEXES);for(let r of this.#t){if(e===r)continue;let n=new _(Ue(e,r),_e(e,r));t.splitMesh(n,e)}this.#r.push(t)}}#i(e){for(let[t,r]of this.#t.entries()){let n=ne.buildMesh(this.#e,s.FACE_INDEXES);for(let i of e[t]){let o=this.#t[i],a=new _(Ue(r,o),_e(r,o));n.splitMesh(a,r)}this.#r.push(n)}}#s(e,t){for(let[r,n]of this.#t.entries()){let i=ne.buildMesh(this.#e,s.FACE_INDEXES),o=e[r],a=t[r];for(let u=0;u<o.length;++u){let m=this.#t[o[u]],l=new _(Ue(n,m,a[u]),_e(n,m));i.splitMesh(l,n)}this.#r.push(i)}}countGrids(e,t){let r=0,n=[0,0,1],i=this.#t[e],o=this.#r[e],a=o.crossSection([0,0,i[2]],n);if(a){let u=a.countGridPoints(i[0],i[1],t);r+=u}for(let u=1;;++u){let m=o.crossSection([0,0,i[2]+u*t],n);if(!m)break;let l=m.countGridPoints(i[0],i[1],t);if(!l)break;r+=l}for(let u=1;;++u){let m=o.crossSection([0,0,i[2]-u*t],n);if(!m)break;let l=m.countGridPoints(i[0],i[1],t);if(!l)break;r+=l}return r}getGrids(e,t){let r=[],n=[0,0,1],i=this.#t[e],o=this.#r[e],a=o.crossSection([0,0,i[2]],n);a&&r.push(...a.getGridPoints(i[0],i[1],t));for(let u=1;;++u){let m=o.crossSection([0,0,i[2]+u*t],n);if(!m)break;let l=m.getGridPoints(i[0],i[1],t);if(!l.length)break;r.push(...l)}for(let u=1;;++u){let m=o.crossSection([0,0,i[2]-u*t],n);if(!m)break;let l=m.getGridPoints(i[0],i[1],t);if(!l.length)break;r.push(...l)}return r}};var Ut={2:"...................5.................557................557...............55777.............55.777............55577777...........55577777..........5557777777........55511..6767.......333.116666666......3331.666666.......3333116666........33331116...........33333.............3333..............33...................................................................................",5:"5..................55................557...............55777..............55777.............5577777...........555777777.........5557777777.........55a77777777.......555aa77777727.....555aaa66666666....3353aa666666666...33333a6666666......33333366666.......333333366.........33333333..........333333.............3333..............33................3..............................",10:"5..................57................557...............55777..............557777............5577777...........555777777.........55577777788.......555aa777..88.......555aa77...222.....555aa.68668.222...5333aa666666999...33333a66666699....3333333666666......3333333666........333333336.........3333333...........333333.............333...............33................3............",20:".......................................77..............55777..............557777............557777............557777788.........55577778888.......555577.88888.......555.78888888......555aa.8888882.....5533.a888999999...33333366999999....3333333669999......33333334.99.......333333344.........33333333..........333333............33333..............33................3............",30:"..........................................................................5.77..............55777.............55777.............55577.8...........55557788...........55557888..........555508888.........3535348888........33333449999.......333333449999.......33333344449.......333333444.........33333334..........333333............33333..............333...............3............",40:"..............................................................................................77..............55577.............55577.............555578.............5550.8............5555088...........5333008...........35333449..........333333444..........333334444.........333333444.........33333344..........3333333...........33333..............333...............3............"};var ge=Math.PI/180,ie=180/Math.PI,de=Math.PI*2;function Z(s,e){return Math.atan2(s,e)+(s<0?de:0)}function O(s,e){return Math.sqrt(s*s+e*e)}var Nr=["white","black","red","green","yellow","blue","brown","purple","pink","orange","gray"],Ir=60,kr=[2,5,10,20,30,40];function qt([s,e,t]){let r=Math.pow(t*Ir,.9),n=Number.MAX_VALUE,i=0;for(let l of kr){let c=Math.abs(r-l);c<n&&(n=c,i=l)}let o=Ut[i];s*=1e3,e*=1e3;let a=Number.MAX_VALUE,u=1;for(let l=0;l<18*21;l+=1){if(o[l]===".")continue;let c=l%18*25+150,f=(l/18|0)*25+75,b=O(s-c,e-f);b<a&&(a=b,u=o[l])}let m=u==="a"?10:parseInt(u);return Nr[m]}function jt([,s,e]){let r=Z(e,s)*ie,n=35;return r<n?Math.abs(180-(360+r-n)):Math.abs(180-(r-n))}function Wt([s,e,t],[r,n,i]){return Math.sqrt((s-r)*(s-r)+(e-n)*(e-n)+(t-i)*(t-i))}function Kt([s,e,t],[r,n,i]){return Math.sqrt((s-r)*(s-r)+(e-n)*(e-n)+(t-i)*(t-i))}function Zt([s,e,t],[r,n,i]){let o=O(e,t),a=O(n,i),u=(o+a)/2,m=.5*(1-Math.sqrt(Math.pow(u,7)/(Math.pow(u,7)+Math.pow(25,7)))),l=(1+m)*e,c=(1+m)*n,f=O(l,t),b=O(c,i),p=t===0&&l===0?0:$t(t,l),h=i===0&&c===0?0:$t(i,c),L=r-s,d=b-f,C=0;f*b<1e-10?C=0:Math.abs(h-p)<=180?C=h-p:h-p>180?C=h-p-360:h-p<-180&&(C=h-p+360);let y=2*Math.sqrt(f*b)*Gt(C/2),M=(s+r)/2,T=(f+b)/2,V=0;f*b<1e-10?V=p+h:Math.abs(h-p)<=180?V=(p+h)/2:Math.abs(h-p)>180&&p+h<360?V=(p+h+360)/2:Math.abs(h-p)>180&&p+h>=360&&(V=(p+h-360)/2);let X=1-.17*qe(V-30)+.24*qe(2*V)+.32*qe(3*V+6)-.2*qe(4*V-63),R=30*Math.exp(-se((V-275)/25)),A=2*Math.sqrt(Math.pow(T,7)/(Math.pow(T,7)+Math.pow(25,7))),P=1+.015*se(M-50)/Math.sqrt(20+se(M-50)),Re=1+.045*T,Ae=1+.015*T*X,Ar=-Gt(2*R)*A,Or=1,Ft=1,Ht=1;return Math.sqrt(se(L/(Or*P))+se(d/(Ft*Re))+se(y/(Ht*Ae))+Ar*(d/(Ft*Re))*(y/(Ht*Ae)))}function se(s){return s*s}function $t(s,e){return Z(s,e)*ie}function Gt(s){return Math.sin(s*ge)}function qe(s){return Math.cos(s*ge)}var Fr=[[.15514,.54312,-.03286],[-.15514,.45684,.03286],[0,0,.01608]],Hr=[[2.944812906606763,-3.500977991936487,13.17218214714747],[1.000040001600064,1.000040001600064,0],[0,0,62.18905472636816]],_r=[[.8951,.2664,-.1614],[-.7502,1.7135,.0367],[.0389,-.0685,1.0296]],Ur=[[.9869929,-.1470543,.1599627],[.4323053,.5183603,.0492912],[-.0085287,.0400428,.9684867]],qr=[[.40024,.7076,-.08081],[-.2263,1.16532,.0457],[0,0,.91822]],Yr=[[1.8599364,-1.1293816,.2198974],[.3611914,.6388125,-64e-7],[0,0,1.0890636]],jr=Object.freeze({SMITH_POKORNY:{direct:Fr,inverse:Hr},BRADFORD:{direct:_r,inverse:Ur},VON_KRIES:{direct:qr,inverse:Yr}});var Jt=jr.SMITH_POKORNY;function k([s,e,t],r=[0,0,0]){let n=Jt.direct;return r[0]=n[0][0]*s+n[0][1]*e+n[0][2]*t,r[1]=n[1][0]*s+n[1][1]*e+n[1][2]*t,r[2]=n[2][0]*s+n[2][1]*e+n[2][2]*t,r}function Ye([s,e,t],r=[0,0,0]){let n=Jt.inverse;return r[0]=n[0][0]*s+n[0][1]*e+n[0][2]*t,r[1]=n[1][0]*s+n[1][1]*e+n[1][2]*t,r[2]=n[2][0]*s+n[2][1]*e+n[2][2]*t,r}function gt([s,e,t],r=[0,0,0]){s=s/255,e=e/255,t=t/255;let n=Math.max(s,e,t),i=n-Math.min(s,e,t),o=n-i/2,a=0;o!==0&&o!==1&&(a=(n-o)/Math.min(o,1-o));let u=0;return i!==0&&(n===s&&(u=60*((e-t)/i%6)),n===e&&(u=60*((t-s)/i+2)),n===t&&(u=60*((s-e)/i+4))),u=(u+360)%360,r[0]=u,r[1]=a*100,r[2]=o*100,r}function je([s,e,t],r=[0,0,0]){e=e/100,t=t/100;let n=(1-Math.abs(2*t-1))*e,i=s/60,o=n*(1-Math.abs(i%2-1)),a=0,u=0,m=0;0<=i&&i<1&&(a=n,u=o),1<=i&&i<2&&(a=o,u=n),2<=i&&i<3&&(u=n,m=o),3<=i&&i<4&&(u=o,m=n),4<=i&&i<5&&(a=o,m=n),5<=i&&i<6&&(a=n,m=o);let l=t-n/2;return r[0]=Math.round((a+l)*255),r[1]=Math.round((u+l)*255),r[2]=Math.round((m+l)*255),r}var Br=0,ye=255,dt=1/ye,xt=!1;function $r(s,e,t){let r=!1;for(let n=0;n<3;++n)s[n]>t?(s[n]=t,r=!0):s[n]<e&&(s[n]=e,r=!0);return r}function yt(s){return s<.03928?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Lt(s){return s>.00304?Math.pow(s,1/2.4)*1.055-.055:s*12.92}function Le([s,e,t],r=[0,0,0]){return r[0]=Lt(s)*ye|0,r[1]=Lt(e)*ye|0,r[2]=Lt(t)*ye|0,xt=$r(r,Br,ye),r}function xe([s,e,t],r=[0,0,0]){return r[0]=yt(s*dt),r[1]=yt(e*dt),r[2]=yt(t*dt),r}function $e([s,e,t],r=[0,0,0]){return r[0]=.299*s+.587*e+.114*t,r[1]=.595716*s+-.274453*e+-.321263*t,r[2]=.211456*s+-.522591*e+.311135*t,r}function Ge([s,e,t],r=[0,0,0]){return r[0]=s+.9563*e+.621*t,r[1]=s+-.2721*e+-.6474*t,r[2]=s+-1.107*e+1.7046*t,r}function Ce([s,e,t],r=[0,0,0]){return r[0]=3.2404542*s+-1.5371385*e+-.4985314*t,r[1]=-.969266*s+1.8760108*e+.041556*t,r[2]=.0556434*s+-.2040259*e+1.0572252*t,r}function F([s,e,t],r=[0,0,0]){return r[0]=.4124564*s+.3575761*e+.1804375*t,r[1]=.2126729*s+.7151522*e+.072175*t,r[2]=.0193339*s+.119192*e+.9503041*t,r}var Ke=[.34567,.3585,.29583],ra=[Ke[0]/Ke[1],1,Ke[2]/Ke[1]],Q=[.31273,.32902,.35825],oe=[Q[0]/Q[1],1,Q[2]/Q[1]];var Ze=!1;function ae([s,e,t],r=[0,0,0]){r[2]=e;let n=s+e+t;return n===0?(r[0]=Q[0],r[1]=Q[1]):(r[0]=s/n,r[1]=e/n),r}function ue([s,e,t],r=[0,0,0]){let n=s*t/e;if(!Number.isFinite(n))Ze=!1,r[0]=0,r[1]=0,r[2]=0;else{let i=t,o=(1-s-e)*t/e;Ze=oe[0]<n||oe[1]<i||oe[2]<o,r[0]=n,r[1]=i,r[2]=o}return r}function Qe([s,e,t],r=[0,0,0]){let n=Z(t,e);return r[0]=s,r[1]=O(e,t),r[2]=n*ie,r}function Je([s,e,t],r=[0,0,0]){let n=t*ge;return r[0]=s,r[1]=Math.cos(n)*e,r[2]=Math.sin(n)*e,r}var Gr=Math.pow(6,3)/Math.pow(29,3),tr=3*Math.pow(6,2)/Math.pow(29,2),Wr=6/29,le=oe;function Vt(s){return s>Gr?Math.pow(s,1/3):s/tr+4/29}function Dt(s){return s>Wr?Math.pow(s,3):(s-4/29)*tr}function et([s,e,t],r=[0,0,0]){let n=Vt(s/le[0]),i=Vt(e/le[1]),o=Vt(t/le[2]);return r[0]=116*i-16,r[1]=500*(n-i),r[2]=200*(i-o),r}function ze([s,e,t],r=[0,0,0]){let n=(s+16)/116,i=n+e/500,o=n-t/200;return r[0]=Dt(i)*le[0],r[1]=Dt(n)*le[1],r[2]=Dt(o)*le[2],r}var E=[.2,.4,.6,.8,1,2,3,4,5,6,7,8,9,10],rr=[[[0,404,164,-384,-203,-9,17],[1,451,183,-414,-224,-15,18],[2,501,204,-446,-249],[3,543,224,-460,-270],[4,592,246,-488,-294],[5,679,290,-515,-335],[6,837,375,-500,-395],[7,1e3,480],[8,1290,740],[9,1430,970],[10,1495,1284],[11,1434,1459],[13,713,1414],[14,449,1145],[15,262,837,-602,486],[16,185,676,-627,-119],[17,144,584,-523,-277],[18,117,516,-443,-313],[19,97,458,-375,-341],[20,80,397,-297,-369],[21,68,332,-236,-339],[22,66,261,-180,-299],[23,72,226,-160,-271],[24,85,195,-155,-242],[25,97,177,-155,-226],[26,111,164,-159,-214],[27,121,157,-168,-205],[28,133,149,-178,-196,20,19],[29,147,143,-185,-192,16,22],[30,165,136,-197,-182,14,18,7,11,3,4,-2,-1],[31,192,130,-213,-173,9,17,5,10,3,5,1,2,0,2,0,1,1,0,1,0],[32,227,126,-241,-164,7,14,3,9,2,6,0,0,0,2,1,1,-1,0,1,0],[33,250,127,-259,-164,4,14,1,8,3,6,-1,1,1,1,0,1,0,0],[34,275,129,-281,-165,3,15,1,5,1,7,1,1,-1,1],[35,288,131,-293,-168,2,17,0,4,2,7,0,0],[36,300,134,-304,-171,1,15,1,7,1,6],[37,315,137,-317,-174,1,15,-1,8,2,3],[38,337,143,-333,-180,-3,15,-1,7],[39,370,152,-359,-189,-4,15,-2,6]],[[0,381,220,-356,-259,-8,11,-3,3,3,-5],[1,411,236,-372,-274,-12,10,-3,1,4,-3],[2,441,255,-384,-291,-18,7,-1,0],[3,466,272,-393,-306,-24,4,-2,-2],[4,490,289,-398,-320,-25,2,-10,-4],[5,534,324,-403,-350,-41,-2,-1,-1],[6,585,367,-395,-372,-76,-13],[7,638,420,-368,-388],[8,698,499],[9,729,588],[10,721,656],[11,659,700],[12,542,670],[13,423,590,-111,640],[14,358,528,-393,411],[15,312,482,-496,177],[16,277,445,-513,16],[17,258,423,-511,-103],[18,239,399,-489,-194],[19,226,380,-463,-259],[20,213,361,-430,-317],[21,196,332,-384,-330],[22,180,298,-329,-337],[23,173,275,-295,-330,66,28],[24,169,249,-264,-311,53,24],[25,169,236,-251,-300,43,26],[26,172,223,-242,-287,35,24],[27,176,213,-239,-275,31,22],[28,183,203,-240,-261,24,18,7,2],[29,190,196,-239,-253,21,16,8,8],[30,202,188,-243,-242,15,15,7,10,10,16,1,2,5,5,1,0,-1,1,-2,-2],[31,220,180,-248,-230,11,15,7,12,5,9,0,2,2,6,1,-2,-1,2,1,0,0,2,0,-2,0,1,0,1],[32,241,176,-259,-221,7,14,5,9,2,6,1,4,1,5,0,0,0,0,1,2,0,-1,0,1,-1,0,1,1],[33,259,177,-272,-220,5,13,3,8,2,4,0,8,2,1,-1,2,1,0,0,2,-1,-1,1,2,0,-2],[34,281,182,-290,-226,2,16,2,5,2,5,-1,6,3,3,-1,1,0,2,1,0],[35,296,185,-303,-228,2,15,1,5,0,4,1,6,2,3,-1,3,1,-1],[36,309,189,-314,-232,3,16,-2,3,2,2,0,10,1,3,-1,0],[37,320,193,-320,-235,0,14,0,5,0,1,0,9,0,2],[38,337,199,-330,-240,-3,14,-2,2,1,1,-3,12],[39,360,209,-346,-249,-4,12,-3,4,0,-3]],[[0,372,247,-345,-283,-7,7,-5,5,-2,1,-1,2],[1,391,260,-350,-293,-9,6,-7,3,-3,2,4,-6],[2,411,274,-353,-302,-13,3,-8,1,-2,3],[3,431,290,-360,-316,-15,2,-10,-2,-10,4],[4,447,305,-357,-326,-22,-2,-13,-3,-11,5],[5,474,332,-345,-342,-39,-9,4,-2,-35,5],[6,505,367,-337,-363,-36,-13,-7,-6],[7,526,397,-288,-353],[8,551,444,-203,-301],[9,563,491,-131,-248],[10,548,526],[11,502,531,40,12],[12,432,501,38,221],[13,377,468,-151,233],[14,342,442,-274,111],[15,315,420,-356,-48,-278,295],[16,292,399,-376,-146,-252,220],[17,281,388,-387,-215,-212,155],[18,270,376,-388,-259,-162,72],[19,259,363,-381,-286,-117,24],[20,247,349,-370,-309,-69,-4],[21,236,334,-355,-327,-34,-14],[22,221,311,-330,-338,6,-14],[23,213,295,-313,-336,17,-2],[24,206,276,-296,-331,26,10],[25,202,260,-281,-318,27,13,-2,-1],[26,202,245,-270,-303,22,16,2,-3],[27,204,235,-265,-292,17,15,5,2],[28,209,227,-265,-282,18,11,7,7],[29,215,221,-264,-277,14,13,10,11,8,10,7,9],[30,223,215,-264,-270,11,13,9,12,8,11,5,7,2,3,1,1,-1,0,1,0,1,2],[31,239,208,-270,-261,11,15,8,13,4,7,3,6,1,3,1,1,0,0,0,1,1,2,0,0,0,-1,0,0,0,2],[32,257,204,-277,-251,8,14,3,7,4,10,2,4,-1,0,2,4,0,0,0,1,0,1,1,1,0,-1,-1,0,0,0],[33,272,205,-286,-250,6,14,2,6,2,9,2,3,-1,-2,1,8,1,-2,-1,3,1,0,0,1,0,-1,0,-1],[34,287,207,-294,-248,1,11,2,4,2,10,0,2,0,-1,1,6,0,-1,0,5,0,-2,1,3],[35,301,211,-306,-252,1,12,0,3,0,9,1,2,1,-1,0,5,1,4,0,0],[36,311,214,-314,-254,1,11,0,3,0,8,1,4,-1,-4,1,9,0,0],[37,322,218,-320,-257,-1,11,0,2,-1,7,0,5,0,-5,-1,8],[38,337,226,-327,-263,-3,7,-2,6,-1,3,-1,6,1,-4,-1,7],[39,355,236,-337,-272,-4,6,-4,6,-1,2,-2,4,1,-1]],[[0,365,261,-337,-292,-6,4,-2,1,-8,9,0,0,-1,1],[1,381,272,-341,-299,-6,1,-6,2,-9,6,0,0,-4,2],[2,399,286,-348,-311,-5,1,-6,1,-11,6,-3,0],[3,411,297,-345,-318,-9,0,-7,0,-10,3,-4,1],[4,423,309,-338,-322,-15,-3,-13,-5,-7,2,-10,-3],[5,445,333,-332,-336,-34,-7,-1,-4,9,-4,-14,3],[6,463,361,-314,-346,-40,-15,-4,-4],[7,475,386,-287,-342,-34,-24],[8,481,411,-213,-288],[9,479,439,-138,-238],[10,465,457,-39,-124],[11,434,460,12,16],[12,397,448,-33,102],[13,363,425,-170,57],[14,336,410,-272,-82,-39,200],[15,314,394,-323,-175,-59,137,-288,307],[16,298,381,-342,-225,-60,98,-202,175],[17,287,371,-349,-254,-61,55,-192,135],[18,280,363,-355,-279,-48,22,-144,78],[19,272,355,-353,-296,-37,3,-98,23],[20,265,346,-352,-310,-21,-10,-62,-6],[21,253,332,-343,-322,-3,-11,-39,-10],[22,241,315,-332,-331,13,-8,-12,-12],[23,230,296,-315,-328,17,1,-1,-4],[24,223,280,-300,-323,17,5,7,3],[25,220,271,-291,-320,16,8,9,7],[26,218,258,-282,-309,16,7,11,8],[27,220,249,-280,-302,15,10,12,10,0,2],[28,222,241,-276,-295,14,12,9,9,5,4],[29,225,234,-272,-287,11,10,11,10,6,9,3,1],[30,234,226,-276,-278,10,10,11,12,5,11,2,-4,4,8,3,4,2,3,-1,0],[31,247,221,-278,-272,9,12,7,12,6,12,1,-2,1,1,2,6,2,3,0,0,-1,0,1,0,1,2,0,1,0,0,1,1],[32,263,219,-284,-268,8,16,4,8,4,10,0,-1,1,3,1,2,0,4,2,0,-1,0,1,1,-1,2,1,-1,0,2,0,-1,0,0,0,2],[33,277,220,-290,-266,4,16,2,6,4,9,0,0,-1,1,2,2,1,5,-1,0,1,1,0,0,0,2,-1,-2,2,4,-1,-2,1,1,0,-1],[34,292,224,-301,-269,5,17,0,4,-2,9,3,-2,0,2,2,4,-1,4,0,1,1,-1,0,2,1,0,-1,1,0,-1],[35,304,228,-310,-272,2,16,1,4,2,10,-2,-3,0,0,2,5,-1,6,1,0,0,0,0,1,1,0],[36,312,232,-314,-275,1,16,0,2,0,11,0,-3,-1,0,1,6,0,4,1,1,0,0,0,0],[37,322,236,-318,-277,-2,14,-1,3,-1,9,1,-3,-1,0,1,9,-1,2,0,0,0,2],[38,336,243,-325,-280,-3,10,-1,2,-3,10,0,-4,-1,4,0,4,-1,3,-1,3],[39,350,251,-331,-285,-4,7,-2,2,-5,9,0,-1,0,0,-2,6]],[[0,363,271,-334,-300,-6,4,-2,0,-5,4,-1,1,-3,5,-3,3],[1,377,282,-337,-307,-5,1,-6,1,-4,3,2,-1,-12,8],[2,391,293,-340,-313,-4,-1,-8,-1,-7,2,3,-3],[3,402,303,-338,-317,-6,-5,-10,-2,-9,1,4,-5],[4,413,315,-333,-323,-15,-7,-5,-6,-12,0,-3,-2],[5,426,334,-321,-331,-31,-13,-7,-11,-12,-6,-4,-4],[6,438,358,-310,-336,-38,-18,-10,-3,13,-1],[7,443,378,-301,-334,-42,-24],[8,445,398,-299,-332],[9,436,418,-291,-331],[10,423,427,-281,-311],[11,404,429,-265,-288],[12,380,421,-259,-242],[13,354,409,-269,-203,-44,-98],[14,336,398,-295,-202,-20,-50],[15,315,384,-317,-230,-21,14,-32,70],[16,301,372,-330,-254,-20,31,-64,95,-10,-62],[17,291,363,-337,-277,-28,27,-35,15,25,-42],[18,283,356,-337,-290,-28,12,-9,-7,15,-22],[19,276,348,-336,-299,-22,5,1,-11,8,-9],[20,269,341,-334,-310,-14,-1,5,-16,5,-6],[21,260,329,-332,-317,1,-8,2,-3,4,-3],[22,250,314,-325,-326,9,-4,3,-6,3,-5],[23,243,302,-316,-327,9,-3,8,-3],[24,236,288,-306,-326,11,1,12,4],[25,232,278,-299,-324,14,5,12,5],[26,229,268,-291,-319,16,9,9,6,8,0],[27,229,258,-286,-311,15,12,9,5,7,5],[28,231,249,-284,-301,14,11,8,7,7,6],[29,236,242,-282,-293,10,9,9,9,6,7,6,4,2,10],[30,243,237,-285,-287,9,8,10,9,7,8,4,8,7,7,-1,0,4,4,-2,0,2,2,0,0,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,-1,0],[31,255,231,-287,-280,9,9,10,12,6,9,3,4,2,4,0,0,1,5,0,-1,1,2,-1,0,1,1,0,0,-1,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[32,268,228,-290,-273,5,9,7,12,3,4,2,4,2,4,0,1,1,3,1,1,0,2,-1,-1,1,1,1,0,-1,1,1,1,0,1,0,-1,0,1,0,1,-1,-1,1,0,0,0,0,0],[33,281,230,-295,-273,4,12,3,5,1,7,1,2,2,4,0,2,1,3,1,0,-1,1,1,2,-1,-1,2,1,-1,0,1,1,-1,2,0,0,1,-1,0,1,0,0],[34,294,233,-303,-273,3,10,1,5,1,5,1,3,1,2,0,4,0,3,1,0,0,0,0,3,1,-2,-1,2,0,-1,1,2],[35,303,236,-307,-275,1,10,0,4,1,5,-1,3,2,1,-1,5,1,3,0,0,0,0,1,2,-1,-1],[36,313,240,-313,-277,0,8,-2,3,1,6,0,3,0,1,1,5,-1,2,1,0,-1,1,0,1],[37,324,246,-319,-282,-2,7,-1,3,-1,6,0,3,0,1,-1,4,0,2,-1,0,1,1],[38,338,254,-326,-288,-3,6,-2,2,0,6,-3,2,0,4,-1,2,-1,2,1,-3],[39,350,262,-329,-294,-5,6,-2,1,-2,4,-1,3,-2,3,-2,3]],[[0,353,296,-321,-314,-3,1,0,-2,-4,1,-2,0,-1,1,-4,2,-3,2],[1,361,303,-320,-316,-4,-1,2,-3,-5,1,-2,-2,-3,1,-1,1],[2,369,311,-320,-319,-3,-2,4,-3,-8,-4,-5,1,0,-2,-8,1],[3,375,318,-316,-319,-5,-4,1,-4,-3,-7,-8,-1,-4,-1,-5,0],[4,381,327,-314,-321,-6,-6,1,-7,-8,-7,-6,-4,-4,-3,-9,2],[5,385,337,-310,-323,-7,-7,4,-6,-13,-10,0,-1,2,-7,-16,3],[6,388,348,-309,-322,-3,-7,1,-6,-13,-4],[7,389,359,-309,-322,-1,-6,-7,-2],[8,387,369,-306,-321,-4,-7,-10,-6],[9,383,379,-303,-319,-5,-13,-9,-7],[10,376,384,-298,-311,-6,-11],[11,366,386,-292,-300,-4,-11],[12,356,385,-293,-291,0,3],[13,342,380,-296,-285,0,20,-4,11],[14,331,374,-304,-283,-1,19,-1,25,-16,-20],[15,317,365,-309,-284,-7,11,-11,21,-9,4,-4,-6,-8,20],[16,307,358,-315,-292,-6,7,-8,14,-10,10,-8,2,-10,-3,-30,26,-11,-10],[17,298,351,-320,-302,-5,3,-3,0,-12,14,-4,-5,-3,-6,0,-5,-4,2],[18,292,345,-320,-305,-4,-2,-2,-3,-8,5,-2,-2,1,-5,2,-3,-2,-4],[19,287,340,-320,-309,-1,-4,-2,-1,-4,1,-2,-2,3,-4,4,-3,-3,-1],[20,282,334,-320,-312,3,-4,-3,-1,-1,-2,0,-3,6,-3,2,-3,-5,2],[21,277,327,-320,-316,6,-4,-4,0,4,-4,3,0,5,-2,2,-1,-4,1],[22,270,318,-317,-321,8,-1,-4,-3,7,-1,8,0,2,0,3,2],[23,265,310,-314,-322,8,-1,-1,-1,8,1,7,3,5,-1,0,2],[24,261,301,-312,-323,8,0,2,-2,8,4,8,1,7,6],[25,258,294,-310,-323,8,0,5,1,7,3,8,7],[26,256,287,-307,-322,8,-1,6,3,9,6,8,7],[27,255,280,-304,-320,9,3,5,3,9,7,9,9,-1,0],[28,256,273,-302,-315,8,5,6,3,8,9,7,5,1,2],[29,259,268,-300,-311,6,4,6,6,8,8,5,5,1,1,5,6,2,1],[30,264,262,-302,-305,6,5,7,6,6,7,5,6,3,1,3,5,2,3,3,4,-1,0,0,0,2,2,1,2,0,0,0,0,-1,-1,1,1,-1,-1,1,0,-1,0,1,0,-1,0],[31,271,258,-300,-301,6,7,5,7,5,5,6,7,2,4,2,1,0,2,2,3,-1,-1,1,3,0,0,1,1,-1,0,1,0,-1,1,1,0,-1,0,1,0,0,0,0,0,-1,0,1,0,-1,0],[32,280,257,-300,-298,4,9,1,3,6,7,3,6,1,2,1,2,1,2,1,1,0,1,0,2,1,0,0,1,0,0,0,1,0,0,0,1,1,0,0,0,-1,0,1,0,0,0,-1,0,1,0],[33,289,258,-302,-295,3,8,1,1,2,6,2,5,1,2,0,3,2,1,-1,2,1,1,0,0,0,2,1,-1,-1,1,1,1,0,2,0,-1,0,1,1,0,-1,0,0,0],[34,298,261,-305,-296,1,8,0,-1,2,7,0,3,1,2,0,5,1,0,0,1,1,1,-1,1,1,0,0,2,0,-2,0,2,0,2,0,0],[35,307,265,-309,-298,0,7,-1,-2,1,7,0,3,0,3,0,2,1,2,0,1,0,0,0,2,0,0,0,-1,-1,0],[36,316,269,-313,-299,-1,4,-1,-1,0,7,-1,2,1,2,-1,2,-1,2,1,2,0,0,-1,0,1,2,0,-2],[37,328,275,-318,-300,-1,1,0,-2,-3,6,-1,2,-1,1,0,3,-1,2,-1,1,1,-1,0,2,-1,0],[38,338,283,-320,-306,-3,1,0,-2,-4,4,0,2,-1,2,-1,1,-2,4,1,-2,-2,2],[39,346,289,-322,-310,-2,2,0,-2,-4,1,-2,2,-2,2,-2,2,-1,0,1,0]],[[0,353,307,-317,-317,-3,-1,0,-1,-3,0,-1,-1,-5,1,1,-1,-4,1,-3,0],[1,359,313,-316,-318,-4,-2,2,-2,-4,-2,-2,-1,-6,1,0,-1,-1,-2,-1,-1],[2,365,319,-315,-319,-6,-2,3,-4,-3,-3,-6,-3,-6,1,0,-2,-2,-2,-2,-2],[3,369,325,-314,-320,-5,-3,1,-4,-3,-4,-5,-5,-10,-1,0,-2,-1,-2,1,-4],[4,373,331,-315,-321,-4,-4,0,-5,-6,-5,-3,-4,-7,-3,-5,0,3,-1,3,-4],[5,376,339,-316,-322,-1,-4,-6,-5,-7,-3,-3,-6,-6,-1,-3,-3],[6,377,348,-316,-324,-2,-5,-10,-6,-5,-3,-5,-1],[7,377,355,-316,-323,-6,-7,-9,-6,-4,-2],[8,375,363,-316,-324,-6,-8,-9,-8,-3,-4],[9,370,370,-312,-323,-8,-11,-7,-7,-4,-6],[10,365,375,-311,-322,-6,-10,-6,-5],[11,359,378,-309,-318,-6,-9,-5,-5],[12,351,379,-306,-313,-6,-8,-4,-6],[13,341,377,-305,-306,-6,-8,-5,2,-2,-3],[14,332,373,-309,-303,-3,-2,-3,4,-5,-5,-3,1],[15,318,364,-309,-299,-3,3,-5,5,-8,2,-5,0,-3,-2],[16,309,358,-313,-304,-2,6,-4,4,-7,3,-2,0,-6,5,-1,-7,-8,8,-4,-5,-3,-2,-2,-2],[17,300,350,-316,-308,-4,0,0,-1,-7,5,0,-3,0,-2,-2,-4,0,-2,-4,1,0,-2,3,-5],[18,294,344,-317,-310,-1,-2,0,-4,-5,2,1,-3,0,-2,2,-4,2,-1,-2,-1,-2,2,-2,0],[19,289,339,-316,-311,0,-5,1,-3,-3,1,1,-1,2,-4,2,-1,2,-2,-1,0,-1,0,-3,0],[20,284,334,-315,-314,2,-4,2,-2,-1,-1,0,0,3,-4,2,0,2,-3,2,-1,-1,0,-4,1],[21,280,327,-316,-315,5,-4,3,-2,-2,-1,4,-1,2,-1,3,-1,2,-1,2,1,1,-2,-4,1],[22,274,319,-314,-318,8,-2,0,-2,3,-1,4,-1,3,1,2,-1,4,1,1,1,0,-2],[23,270,312,-313,-320,9,0,3,-1,2,0,5,2,2,-1,4,1,2,0,2,0],[24,266,305,-310,-321,8,-1,5,2,1,-1,7,3,1,0,7,4,3,2],[25,264,298,-310,-321,11,2,3,0,3,1,6,3,4,1,4,6],[26,262,292,-306,-321,10,4,3,-1,4,2,5,4,4,2,3,5],[27,262,286,-304,-318,10,4,2,1,6,4,3,1,3,4,6,5],[28,263,280,-301,-313,6,3,5,4,4,3,3,1,4,5,4,3,1,-1],[29,266,276,-301,-311,6,4,5,4,4,4,2,3,3,2,3,3,1,1,4,4,0,0],[30,271,272,-303,-308,5,5,6,6,2,1,3,4,3,2,2,2,2,4,3,2,1,2,0,0,2,3,1,0,-1,1,1,-1,0,2,1,1,-1,-1,1,0,0,1,0,0,0,0,0,-1,0,0],[31,278,269,-304,-306,5,6,5,6,2,3,3,3,3,3,3,2,1,4,1,2,1,-1,0,2,0,2,1,0,0,0,0,0,1,2,-2,-1,1,0,1,1,-1,0,1,0,0,0,-1,0,1,0],[32,285,267,-304,-302,4,6,3,5,1,2,4,6,0,0,2,3,2,3,0,1,0,1,1,0,0,2,1,0,0,1,0,-1,0,2,-1,0,2,0,-1,0,1,0,-1,1,1,0,0,0,0,0],[33,292,268,-305,-302,3,7,3,5,0,1,2,5,0,1,1,2,1,2,0,2,1,0,0,1,0,2,0,-1,0,1,1,1,0,0,0,-1,0,2,0,0,1,-1,-1,2,0,-1],[34,300,270,-307,-301,1,6,1,2,0,3,2,3,0,3,0,1,1,2,0,2,0,0,0,0,1,2,0,0,0,1,0,0,0,-1,0,2,0,0,0,0,0,0],[35,309,274,-311,-303,1,5,-1,1,0,4,0,2,1,3,0,2,0,0,0,3,0,0,0,0,1,1,-1,0,0,2,1,-2,-1,1,0,1,0,0],[36,317,279,-313,-306,-1,4,0,2,-1,2,-1,2,0,2,0,4,0,-2,-1,4,1,0,-1,0,0,1,1,-2,-1,3,0,-2,0,0],[37,327,286,-314,-310,-3,5,0,-1,-2,2,-1,3,0,1,-1,1,-1,1,-1,2,1,-1,-2,3,0,0,3,-4,-3,4],[38,337,294,-315,-314,-4,3,-2,0,-2,1,-1,1,-2,0,0,2,-3,2,0,0,1,-3,-4,5,2,0],[39,345,300,-316,-315,-4,1,-1,-1,-2,1,-2,-1,-2,2,-2,0,-2,1,1,1,-1,-2]],[[0,342,311,-312,-318,-2,0,0,-1,-3,0,1,-1,-3,-1,-2,1,3,-2,-4,1,-5,2,1,-2],[1,346,315,-311,-317,-2,-2,0,-2,-3,0,0,-1,0,-2,-5,0,3,-1,-3,1,-7,0,3,1],[2,351,320,-310,-318,-3,-1,1,-3,-4,-1,0,-2,-1,-2,-3,-1,-2,-2,-4,0,-5,2,1,-2],[3,354,324,-309,-318,-2,-2,0,-2,-4,-3,-3,-2,0,-2,-6,-3,-2,-1,-1,-2,-5,3,1,-3],[4,358,329,-308,-317,-4,-3,0,-3,-4,-4,-4,-1,-3,-3,-9,-2,4,-1,-3,1,1,-2,2,0],[5,362,337,-310,-320,-5,-4,-1,-2,-5,-3,-8,-3,0,0,-8,-1,5,0],[6,365,344,-311,-320,-8,-6,-4,-5,-6,-2,-6,-4,0,-1],[7,366,350,-311,-319,-10,-9,-7,-5,-6,-3,-9,-3,5,0],[8,366,359,-313,-323,-10,-10,-8,-6,-7,-4,-8,-5],[9,363,365,-312,-322,-11,-12,-7,-7,-8,-7,-8,-5],[10,359,370,-311,-321,-10,-13,-8,-10,-9,-4,-5,-9],[11,354,373,-310,-319,-9,-12,-8,-12,-6,-6,-8,-9],[12,348,373,-309,-314,-7,-11,-8,-13,-5,-7,-8,-9],[13,338,371,-305,-309,-7,-9,-6,-9,-4,-6,-6,-12],[14,331,368,-308,-308,-5,-3,-3,-4,-4,-6,-2,-13,-1,6],[15,319,360,-310,-304,-1,2,-4,3,-4,-5,-5,0,-3,-5,-4,8,0,-7],[16,311,355,-312,-308,-2,6,-3,1,-4,4,-5,3,-2,-3,0,-8,-4,7,-8,10,2,-10,4,-10,-13,17,-12,8],[17,301,347,-313,-312,-3,5,-3,-2,-2,3,-3,1,1,-7,-1,-2,0,-1,1,-4,0,-1,-3,0,2,-2,-2,5,-8,6],[18,296,342,-314,-314,-2,1,-2,-1,-2,-2,-4,2,7,-8,-2,0,2,-1,4,-5,-1,0,-5,4,3,-3,-1,2,-2,-3],[19,292,337,-314,-314,-1,-1,-1,-2,0,0,-4,0,7,-6,0,0,1,0,4,-4,0,0,-3,1,0,0,0,-1,1,0],[20,288,333,-313,-316,-1,-1,1,-2,1,-1,-4,1,8,-4,1,-2,-1,0,4,-2,1,-1,0,0,0,1,-2,-1,2,0],[21,284,327,-313,-316,2,-3,0,0,0,-2,2,-1,4,-1,3,-1,0,0,3,-1,2,0,0,-1,0,1,0,-1],[22,280,321,-312,-319,2,-1,1,-2,2,0,3,-1,3,-1,3,0,2,0,1,0,3,0,3,2,-2,0],[23,276,315,-309,-319,1,-2,3,0,1,-2,4,1,3,0,4,2,2,0,3,0,1,1,2,1],[24,274,309,-310,-320,5,-1,0,-1,3,0,5,1,1,2,8,2,-2,-1,5,2,0,0],[25,273,304,-310,-321,6,1,0,-3,3,2,7,3,-1,-1,9,6,-4,-4,6,6],[26,272,299,-308,-320,6,0,0,-1,5,2,4,1,1,2,4,1,1,3],[27,273,295,-307,-320,5,2,1,-1,6,4,1,1,2,1,1,1,7,6],[28,275,291,-307,-317,5,2,0,-1,6,4,2,2,1,1,3,2,2,2,2,3],[29,278,288,-307,-316,4,2,1,1,5,5,1,1,2,0,3,3,1,2,2,1,2,1,2,5],[30,282,284,-308,-312,3,2,0,1,6,4,1,3,2,0,1,2,2,1,1,1,3,3,3,3,1,2,-1,1,1,0,1,1,0,0,0,-1,-2,-2,2,3],[31,286,282,-306,-311,1,3,2,1,3,4,2,3,2,2,2,1,2,2,0,0,3,5,0,0,1,1,0,1,0,1,0,-1,0,0,1,0,-1,1,0,0],[32,291,280,-306,-308,1,2,2,4,1,2,2,2,1,2,3,3,0,2,1,-1,1,4,0,1,0,-2,1,3,0,0,-1,-1,2,0,-1,1,0,0,-1,0],[33,296,281,-306,-309,0,5,3,2,0,2,1,2,1,3,1,0,0,2,0,1,2,3,0,0,-1,0,1,1,1,1,-1,-2,-1,1,1,1,0,-1,0,1],[34,302,283,-308,-309,0,4,2,2,-1,2,2,2,0,1,0,1,0,3,1,0,0,3,1,-1,-1,1,0,0,1,2,-1,-2,1,-1,0,4,0,-1,1,-1],[35,309,286,-310,-310,1,4,-1,1,0,2,0,2,0,0,0,1,0,2,0,2,0,1,0,1,1,-1,-1,1,0,0,0,1,0,-2,1,2,-1,1,0,-1],[36,316,290,-311,-311,-1,1,-1,3,0,1,-1,1,0,2,0,1,0,-1,-1,0,0,5,0,0,0,-1,-1,1,1,-1,0,1,0,1,-1,-1,1,1],[37,323,295,-312,-313,-1,1,-1,1,-1,2,-1,0,0,2,-1,0,0,0,0,0,-2,3,0,0,0,2,0,-2,1,-3,-2,5,-1,0],[38,331,301,-313,-315,0,0,-2,1,-3,2,1,-2,-1,2,-2,0,1,-1,-1,1,-2,2,-2,-1,2,0,-2,2,3,-3],[39,337,306,-313,-316,0,0,-2,-1,-3,1,0,-1,-1,1,-1,-1,0,0,-1,-1,-6,4,3,-2,0,-1]],[[0,333,313,-307,-317,0,-1,0,-1,-4,0,3,-2,-6,2,3,-2,-2,0,1,0,-7,0,2,2,-4,0,-1,1],[1,336,316,-306,-317,0,-1,-1,-1,-1,-1,1,-2,-6,1,2,-2,-1,-1,0,0,-9,1,-1,1,-1,0,-2,1],[2,339,319,-304,-316,-1,-1,-1,-2,1,-1,-2,-3,-5,1,3,-3,-2,0,-6,-1,-2,0,-6,1,0,1,-2,0],[3,343,323,-305,-317,-1,0,1,-2,-1,-3,-2,-2,-4,-1,0,-2,-5,-1,-3,-1,-1,1,-3,0,-7,0,4,0],[4,347,328,-306,-316,1,-2,-1,-2,-1,-3,-3,-2,-8,-3,-2,0,-1,-2,-1,-1,0,-1,-3,1,-3,-1],[5,351,334,-309,-319,2,0,-1,-3,-5,-4,-8,-1,-5,-3,-5,0,4,-1,-5,1],[6,353,340,-309,-319,1,-1,-4,-5,-8,-5,-7,-2,-4,-2,-2,-1,-3,-1],[7,354,345,-309,-319,0,-2,-7,-5,-9,-5,-6,-4,-6,-3,0,1],[8,355,351,-310,-318,-2,-4,-9,-8,-9,-6,-6,-4,-1,-3,-5,1],[9,353,357,-309,-319,-3,-4,-10,-11,-9,-7,-5,-3,-2,-3],[10,350,362,-308,-318,-4,-6,-10,-13,-8,-6,-5,-5,-1,-4],[11,347,364,-309,-316,-3,-5,-10,-13,-7,-9,-4,-6,-2,-1],[12,342,365,-308,-314,-3,-5,-7,-11,-8,-11,-4,-6,-2,-3],[13,335,364,-308,-314,-1,1,-5,-9,-8,-12,-2,-7,-4,-3],[14,329,361,-310,-312,-1,2,-2,-3,-5,-8,-3,-9,-2,-7,-3,-2],[15,319,356,-311,-313,0,6,-2,1,-2,1,-4,-5,-2,-7,0,-7,0,-1,-4,5],[16,311,351,-311,-314,0,5,-3,4,-2,2,-4,3,-1,-5,-4,3,-1,-1,-3,1,2,-8,-3,3,-4,2,-2,5,-4,0,1,-3],[17,303,345,-312,-316,-1,2,-3,2,-1,0,-4,3,0,-2,-2,1,-3,-1,3,-5,0,-1,1,-3,-1,-1,0,-1,-4,4,3,-4],[18,298,339,-312,-315,-1,-1,-3,2,0,-3,-5,3,4,-6,-2,2,0,-2,4,-4,-1,-1,-1,3,2,-4,0,1,-4,1,1,2],[19,295,336,-312,-317,-1,-2,-2,3,0,-4,-4,3,6,-4,-3,-1,1,1,4,-4,0,0,-1,0,2,-2,1,0,-4,1,-2,0],[20,291,331,-311,-316,1,-2,-3,1,2,-2,-5,2,7,-4,-2,0,1,0,3,-3,0,0,1,-1,3,-1,0,0,-4,2,-2,1],[21,288,327,-310,-317,1,-2,-3,1,1,-2,-1,-1,6,-2,-3,0,3,0,2,-2,1,0,3,0,2,-1,-1,1,0,-1,-4,1],[22,284,321,-309,-317,2,-2,-3,-1,1,-1,1,0,8,0,-5,-2,2,0,4,1,3,-1,1,1,2,-1,1,1,0,0],[23,281,316,-307,-317,0,-1,0,-3,1,0,1,0,6,0,-1,0,0,0,4,0,3,1,3,0,2,2],[24,280,311,-309,-318,1,-2,2,0,1,-1,2,0,5,2,-2,-1,2,0,4,1,1,2,5,1],[25,279,307,-309,-319,2,-1,2,0,1,-1,1,0,6,2,-1,0,4,1,-2,-1],[26,279,303,-309,-318,3,-3,1,0,3,1,1,-1,3,3,0,-1,4,2,3,2],[27,280,300,-309,-319,3,-1,2,1,2,0,1,0,3,3,1,-1,3,3,3,3],[28,282,297,-309,-318,2,0,2,0,2,2,2,0,1,3,2,-1,3,5,1,-2,0,3],[29,285,294,-310,-316,2,-1,2,2,2,1,1,1,3,3,1,-1,0,2,2,2,2,1,-1,0],[30,288,292,-310,-315,1,-1,2,3,1,1,2,2,1,1,2,0,1,2,2,1,2,4,-2,-3,2,2,1,1,2,1,-2,1],[31,292,291,-310,-315,0,-1,4,3,1,4,0,-1,1,2,3,2,0,1,2,1,3,3,-1,-1,0,2,2,1,-1,0,0,0,0,0],[32,296,291,-310,-316,1,0,1,5,3,2,-1,1,2,1,0,2,3,2,0,1,1,1,0,0,0,0,1,2,-1,-1,0,1,1,1,0,-1],[33,300,291,-310,-315,1,1,1,3,2,4,0,-1,1,3,1,1,0,2,0,0,0,1,1,0,1,2,-2,-2,2,3,-1,-2,0,1,1,0,0,2],[34,305,293,-311,-316,0,2,2,2,0,3,0,0,1,3,-1,0,2,1,-1,2,1,0,0,0,1,2,-1,0,-1,-1,0,0,2,1,-1,1,1,1,0,0],[35,310,296,-310,-317,-1,2,1,1,-1,3,0,0,1,2,-1,1,0,0,0,2,1,-1,-1,3,0,-1,1,1,-1,0,0,-1,1,1,-1,1,0,2,1,-2],[36,315,299,-310,-317,-1,0,0,1,-1,4,0,-1,-1,2,0,0,0,1,0,1,0,0,-1,2,1,-2,-1,3,0,-1,0,1,0,-2,0,1,0,3,0,-1],[37,320,302,-310,-317,0,0,-1,0,-2,3,1,0,-2,0,0,2,0,0,-1,0,0,0,0,3,-1,-2,0,1,0,0,0,1,-1,0,2,-2],[38,326,307,-310,-319,1,1,-1,0,-3,1,1,-1,-2,2,0,-1,-1,1,0,0,-1,1,0,-1,-2,1,-1,1,1,0,-1,0],[39,330,310,-308,-318,-1,0,-1,-1,-2,1,1,-1,-4,1,2,-1,-3,0,2,0,-4,1,1,0,-4,1,1,1,0,-1]],[[0,329,314,-307,-317,1,-1,-4,1,3,-2,-1,0,-2,-1,4,-1,-5,1,-1,-1,-3,1,0,0,-3,0,0,2],[1,332,317,-307,-318,1,1,-2,-2,1,0,0,-2,-3,0,3,-2,-3,1,-3,0,-3,-1,-3,0,1,1,-5,-1],[2,334,319,-305,-316,0,-1,-2,-1,2,-1,-1,-2,-2,0,2,-1,-3,-1,-5,-1,-2,0,-4,0,-3,1,3,-2,-3,0],[3,338,323,-307,-317,0,-1,1,-1,2,-1,-4,-1,1,-2,-2,-1,-2,-1,-7,-2,2,1,-8,0,-1,-1,2,-1,-3,0],[4,342,327,-307,-316,-2,-2,2,-1,1,-1,-2,-2,-2,-2,-5,-2,0,0,-4,-2,-1,0,-4,1,-3,-1,2,0,1,-2],[5,345,332,-309,-317,1,-2,-2,-2,1,-1,-3,-2,-6,-2,-6,-2,-3,-1,-2,-2,-6,2],[6,347,337,-310,-318,2,0,-3,-4,-3,-3,-5,-2,-6,-3,-4,-2,-6,-2,1,1],[7,349,342,-312,-319,1,0,-2,-5,-6,-2,-5,-5,-8,-3,-2,-1,-7,-3,1,-1],[8,349,348,-312,-319,1,-3,-5,-4,-6,-5,-6,-5,-6,-4,-4,-1,-3,-4],[9,348,354,-312,-321,0,-2,-4,-7,-8,-5,-7,-7,-4,-2,-3,-4,-3,-1],[10,346,358,-313,-320,2,-3,-6,-7,-8,-8,-7,-7,-1,-1,-5,-6],[11,343,360,-311,-320,-1,0,-5,-8,-7,-10,-6,-7,-2,-2,-4,-7],[12,340,361,-312,-319,0,0,-4,-6,-7,-10,-5,-9,-2,-2,-4,-8],[13,334,361,-311,-318,0,0,-2,-1,-6,-12,-4,-8,-3,-4,-4,-9],[14,329,359,-312,-317,-1,1,-1,1,-3,-6,-3,-8,-3,-7,-1,-8,-1,-2],[15,319,355,-310,-318,-2,3,0,5,-3,-2,-1,-3,-2,-1,-1,-10,-1,-7,0,-5,0,4],[16,311,350,-310,-318,0,4,-2,2,-2,1,-2,2,-3,3,-1,-4,-2,2,0,-4,-1,0,-3,6,2,-6,-4,5,-3,-1,3,-8],[17,304,344,-311,-318,-1,0,-1,2,-2,1,-1,-1,-2,4,-1,-2,-3,1,0,-1,0,-2,-2,1,0,-3,1,-1,-4,1,0,0,1,-1],[18,299,338,-311,-316,0,-2,-2,-1,0,0,-4,2,2,-3,-1,0,0,-1,-1,0,0,-1,0,0,1,-1,0,-1,-3,2,2,-3,-4,2],[19,296,334,-311,-316,0,-3,0,1,-1,-1,-2,1,1,-2,0,-1,-1,1,2,-1,0,-1,-1,-1,2,0,0,0,-3,0,2,0,-2,0],[20,293,330,-311,-316,2,-2,-1,0,0,0,-2,-1,3,0,-2,-2,1,1,0,-1,2,-1,-1,0,3,-2,0,0,-2,1,1,-1,-3,3],[21,290,327,-310,-317,3,-2,-3,-1,2,-1,-2,1,3,-2,-1,0,1,-1,1,0,1,-1,-1,0,3,0,4,-1,-3,1,0,-2],[22,287,322,-309,-318,1,-1,1,-1,0,0,0,-1,2,-1,1,1,1,-1,0,-1,0,-1,1,2,4,-1,4,0,-1,1],[23,285,317,-310,-317,3,-1,1,-1,0,-1,1,0,3,0,-1,0,2,-1,-1,0,1,0,2,1,4,-1],[24,284,313,-310,-318,2,-1,2,-1,1,0,0,-1,3,1,0,-1,2,1,-1,0,2,0,1,0],[25,284,310,-311,-319,1,-2,3,0,3,0,-2,-1,4,2,-1,-1,4,2,0,-1,1,-1],[26,284,306,-310,-318,0,-3,3,0,2,0,2,0,0,0,0,1,5,1,-1,2],[27,285,304,-310,-320,0,-1,3,0,2,0,0,0,3,1,-1,0,3,2,3,2,1,1],[28,287,301,-310,-318,-1,-2,3,1,2,1,-1,-2,3,3,-1,-1,4,3,3,3,2,2,-3,-2],[29,290,299,-312,-318,1,-1,1,1,3,1,-2,-1,3,2,0,-1,5,5,0,1,1,2,0,-1],[30,292,298,-311,-318,-1,-2,3,3,1,1,-1,-1,1,1,0,0,7,7,-2,-2,3,2,0,0,-1,0],[31,296,296,-312,-317,0,-1,3,4,0,0,-1,-1,2,1,-1,1,6,5,0,0,1,1,0,1,-1,-3],[32,299,296,-312,-317,1,-1,2,4,0,1,0,-1,1,2,1,-1,2,6,-1,-2,1,2,2,2,-1,-3,0,2],[33,302,296,-311,-316,0,-1,2,3,0,1,2,2,-1,1,2,0,-1,3,1,-2,0,2,1,1,-1,-1,0,2,1,-1,0,1],[34,305,297,-310,-316,0,0,1,2,-1,1,2,2,-1,0,1,1,0,2,0,-1,0,-1,1,4,0,-1,-1,0,1,1,0,1,0,0,0,2],[35,311,299,-311,-315,-1,-2,1,3,-1,0,1,2,-1,1,1,0,0,1,-1,-1,0,1,1,2,-1,-2,0,3,0,-2,0,2,0,1,1,1],[36,315,302,-312,-317,2,0,-2,1,0,1,0,1,0,-1,-1,3,0,0,0,-2,0,3,-1,0,1,-1,-1,1,1,2,-1,-1,0,1,0,1],[37,319,305,-311,-317,1,-1,-1,2,-1,0,0,-1,0,2,0,-1,-2,2,1,-1,-1,2,0,-1,-1,1,0,1,1,-1,-1,1,-1,1,0,1],[38,323,309,-309,-318,1,-1,-2,2,-1,0,1,-1,-1,-1,0,2,-1,-1,1,-1,-4,4,-1,-1,3,-1,-4,2,0,1,1,-2],[39,326,311,-308,-316,2,-2,-5,1,2,-1,0,-1,-1,1,0,-2,-3,2,3,-2,-4,3,-2,-1,-1,1,-1,0,-2,1]],[[0,326,315,-307,-317,1,-1,0,0,-1,-1,3,-1,-2,0,-1,0,-1,0,-3,1,-2,-1,2,-2],[1,328,317,-306,-317,1,0,0,-1,-1,-1,4,0,-4,-2,1,0,-5,0,-2,0,-3,-1,4,1],[2,331,319,-307,-316,2,-1,0,0,-1,-2,3,-1,-3,0,0,-2,-5,0,-3,0,-1,-1,1,-1],[3,334,322,-307,-316,1,0,3,-2,-4,-1,4,0,-3,-2,0,-1,-8,-2,-1,0,0,-1,-4,0,0,0],[4,336,325,-305,-314,0,-2,2,-1,-4,-1,4,-1,-3,-2,-1,-1,-10,-3,2,1,1,-1,-6,-2,1,-1],[5,339,330,-306,-316,0,-1,-1,-2,-2,-2,3,0,-3,-1,-8,-3,-4,-2,-6,0,0,-1,-4,0],[6,342,335,-309,-317,1,-1,-3,-3,0,-1,-1,-2,-6,-2,-5,-3,-7,-2,-2,-1,-1,1],[7,344,340,-311,-319,1,0,-3,-3,-3,-3,-1,-2,-7,-3,-5,-3,-5,-3,-4,0,2,-1],[8,344,345,-310,-318,-2,-3,-2,-4,-3,-2,-4,-4,-6,-4,-5,-3,-3,-2,-5,-1],[9,344,351,-312,-322,-1,-2,-3,-3,-2,-3,-6,-6,-6,-5,-4,-3,-4,-3,-1,0],[10,342,354,-312,-319,-1,-4,-3,-5,-2,-2,-7,-8,-6,-5,-2,-3,-4,-4,0,0],[11,340,356,-312,-319,-2,-4,-2,-2,-2,-5,-7,-9,-5,-4,-2,-4,-4,-4],[12,337,357,-312,-319,-1,-2,-1,-3,-3,-3,-7,-11,-3,-4,-4,-5,-2,-5],[13,333,357,-313,-319,0,-1,-1,-1,-2,-1,-5,-11,-2,-5,-4,-7,-4,-6],[14,328,356,-312,-319,-2,-1,0,2,-1,0,-3,-6,-2,-7,-3,-9,-3,-5,1,1],[15,319,352,-311,-319,-1,1,0,3,-2,2,-1,-1,-1,-1,-1,-7,-1,-6,-1,-6,0,1,0,-4],[16,312,347,-311,-318,0,1,-1,3,-2,1,-1,2,-1,1,-3,1,0,-3,-2,2,0,-4,-2,5,1,-7,0,1,1,-3,0,3],[17,305,341,-311,-318,0,0,-1,3,-1,1,-3,0,1,-1,-2,1,0,0,-3,0,0,1,0,-3,-4,3,-1,-2,-3,2,3,-4,-5,2],[18,300,337,-310,-319,0,-1,-1,1,-3,1,1,-1,-3,0,1,-1,1,-2,-2,1,1,-2,1,-1,2,-2,-5,4,-1,-1,1,-1,-2,1],[19,297,333,-309,-318,0,-1,-1,0,-2,1,0,0,-1,-1,0,-1,2,-1,-1,0,0,-1,3,-1,0,-2,-3,3,-1,-1,1,0,0,0],[20,295,330,-310,-318,1,-1,-1,0,-1,0,1,-1,-2,1,2,-2,0,0,1,-1,-2,1,4,-2,2,-2,-3,1,-1,2,3,-2],[21,293,327,-310,-319,2,0,-2,0,-1,-1,2,-1,-1,-1,3,0,-2,0,2,-1,-2,0,5,-1,0,-1,-1,0,1,1,2,-2],[22,290,323,-309,-319,2,-1,-2,1,0,-2,3,0,0,-1,0,0,0,0,2,-1,-2,-1,4,1,3,0,0,0,0,-1],[23,288,318,-309,-317,3,-1,-2,-1,0,0,2,-1,2,0,-1,-1,2,1,2,-1,-3,0,4,1,4,0],[24,287,314,-310,-317,4,-1,-2,-2,1,1,0,-2,3,1,-1,0,3,0,3,1,-2,-1,0,-1],[25,287,311,-311,-318,3,-1,0,-1,-1,0,3,-2,1,2,0,-2,4,3,1,0,0,-1],[26,288,308,-313,-319,3,-1,1,0,0,-3,0,0,5,3,-1,0,0,-1,3,2],[27,289,306,-313,-319,3,-1,0,-2,0,0,1,-1,3,3,1,0,-1,-1,6,3],[28,291,304,-313,-319,1,-1,1,-1,0,-1,0,0,4,4,0,-2,1,2,2,0],[29,293,303,-313,-321,1,1,0,-1,0,-1,2,1,1,0,1,2,3,2],[30,295,301,-313,-319,1,-1,0,1,-1,-1,1,0,3,2,1,1,2,2],[31,298,300,-313,-319,1,-1,0,1,0,-1,1,2,2,3,1,-1,1,3,-1,-1],[32,301,300,-313,-320,1,1,0,1,0,-1,2,1,1,3,1,2,0,1,1,-2,-1,2],[33,303,300,-311,-319,0,1,1,1,0,0,0,1,2,1,0,2,1,4,0,-5,0,2,0,2],[34,306,301,-311,-319,0,1,1,1,-1,0,1,2,1,1,0,0,0,1,0,0,0,0,0,2,0,-1,1,2],[35,311,304,-311,-320,0,1,0,0,0,1,-1,2,1,-1,0,1,-1,1,0,0,1,0,-1,1,0,0,0,1,0,0],[36,314,305,-310,-318,0,0,0,-1,-1,2,-1,1,1,0,0,-1,-1,2,0,0,0,-1,-1,2,-1,0,1,1,0,0],[37,317,308,-309,-319,1,-1,-1,2,-1,0,0,0,-1,0,1,-1,-1,1,0,0,-2,2,0,2,1,-2,-1,0,0,2],[38,321,310,-309,-317,2,-1,-1,0,-2,1,2,-2,-1,1,0,-1,-1,1,-4,1,3,0,-3,1,2,-3,-1,3],[39,323,313,-307,-318,1,-1,-1,0,-1,1,2,-3,-1,1,-1,0,-2,-1,-1,2,-1,0,-1,0,0,-1]],[[0,322,315,-303,-316,0,-2,1,0,-2,0,6,-2,-7,2,-3,-1,2,0,-1,-1],[1,324,317,-302,-316,-1,-1,2,-1,0,0,3,-1,-5,-1,-5,0,1,1,0,-1],[2,325,319,-299,-316,-3,0,3,-2,-1,0,4,-2,-7,0,-4,0,1,-1],[3,328,321,-300,-314,-1,-1,2,-1,-2,-2,4,0,-9,-4,0,1,0,-1,-5,1],[4,330,324,-298,-313,-3,-2,1,0,-2,-3,4,0,-6,-2,-4,-2,0,1,-4,-3,1,1,0,-1,-1,0],[5,333,328,-299,-313,-5,-3,3,-1,-5,-1,3,-1,-2,-3,-8,-1,-2,-2,-3,0,-1,-2,-2,0,-2,0],[6,337,333,-305,-315,-2,-3,2,1,-5,-4,0,-1,-3,-1,-3,-4,-9,-2,-1,-2,-3,2,2,-2,-3,0],[7,340,338,-310,-317,0,-3,1,0,-5,-3,-1,-2,-5,-2,-2,-3,-6,-2,-5,-2,0,-2,0,2],[8,341,343,-312,-319,0,-1,0,-3,-4,-3,-3,-3,-3,-2,-5,-4,-4,-2,-3,-2,-2,-1],[9,341,348,-314,-321,2,-1,-3,-4,-2,-3,-3,-2,-5,-5,-4,-3,-5,-3,-1,-2,-1,0],[10,339,352,-313,-321,0,-2,-1,-3,-3,-4,-4,-3,-4,-6,-5,-4,-3,-3,-1,-2,-2,0],[11,338,354,-314,-322,0,0,-1,-3,-4,-5,-1,-3,-7,-7,-2,-4,-4,-4,-1,-2],[12,336,355,-314,-322,0,1,-1,-4,-3,-3,-3,-4,-4,-7,-3,-4,-4,-5,0,-2],[13,333,356,-316,-323,2,1,-2,-2,-1,0,-3,-6,-2,-5,-4,-7,-3,-6,-1,-2,0,0],[14,328,354,-313,-321,-1,1,-1,-1,-1,1,-2,-2,-1,-5,-4,-10,-1,-2,-1,-8,-1,2],[15,319,350,-311,-319,-1,1,0,0,-2,2,0,1,-1,0,-2,-4,0,-5,-2,-8,1,3,-1,-6,1,4,-1,-2],[16,312,346,-310,-319,-1,1,-1,-1,-1,5,-1,1,-1,-1,-2,1,0,1,-2,0,0,-4,0,-2,0,-10,-2,6,-1,2,-2,6],[17,305,340,-309,-319,-2,3,1,-2,-2,1,-2,2,1,-2,-2,3,-1,1,0,-2,-1,-1,-1,-1,0,-4,-3,6,-1,-2,-2,-1],[18,301,336,-310,-320,-1,2,0,-1,-1,-1,-1,0,0,0,-1,-1,-1,0,0,1,0,-3,0,0,-3,1,0,2,-2,0,0,-5],[19,298,333,-309,-320,-1,2,1,-3,-1,2,-2,-1,1,0,0,-1,-1,0,1,0,-2,-2,0,2,-1,0,0,-1,-2,2],[20,296,329,-309,-318,-1,0,1,-1,0,0,-2,0,2,-1,-1,0,0,1,0,-3,0,1,-3,1,2,-1,0,-1],[21,294,327,-309,-319,1,0,-1,-1,0,0,0,-1,1,-1,0,0,-2,0,2,0,0,-1,-2,1,0,-1],[22,292,323,-309,-318,1,-1,-1,-1,1,0,0,0,2,-1,-1,0,-1,-1,2,1,1,-1,-3,1,-1,-1],[23,290,318,-308,-316,-1,-2,1,0,1,0,0,-1,3,0,-1,0,-2,-2,4,0,-2,1,-1,0],[24,289,315,-309,-317,0,-1,1,-1,1,1,0,-2,3,1,-3,-2,2,0,4,2,-3,-1],[25,290,312,-313,-317,2,-2,1,-1,1,0,0,-1,3,0,-4,-1,5,-1,1,1],[26,291,310,-315,-320,3,-1,-1,-2,2,0,-2,-3,6,5,-2,-4,2,1],[27,292,308,-315,-320,1,-2,0,-1,2,-2,-1,0,5,3,-1,-1],[28,294,306,-316,-321,1,0,-1,-2,3,0,-1,-1,4,0],[29,296,305,-316,-322,0,0,1,-1,0,0,3,0,-1,0],[30,297,304,-314,-322,-2,-1,2,1,0,-2,4,5,-1,-5],[31,300,303,-314,-321,-2,-2,1,-1,1,1,5,6,-2,-3],[32,303,304,-315,-323,0,-1,1,-1,0,2,2,5,1,-1,1,4],[33,305,304,-314,-323,1,1,0,0,2,0,0,5,1,-1,1,4,0,-1],[34,307,305,-313,-323,1,1,0,0,1,2,0,1,1,1,1,3,0,0,-1,-2,0,1],[35,311,307,-311,-322,0,2,1,-3,-1,3,0,0,-1,0,1,3,0,0,0,0,0,0,0,-1,0,0],[36,313,308,-308,-320,-2,-1,1,0,-1,1,0,1,0,-1,0,2,-1,2,0,-2,1,-1,-1,1,0,0],[37,315,310,-306,-320,0,0,-1,-1,-1,2,0,-2,0,2,0,-1,-3,3,2,-2,0,0,-2,0,1,0],[38,318,312,-305,-319,0,0,0,-1,-1,1,1,-2,-2,2,-2,0,0,0,0,-1,0,0,-1,1],[39,320,314,-304,-319,0,0,0,-1,-1,1,2,-2,-3,1,-2,0,0,-1,-1,1,0,0]],[[0,321,316,-302,-318,0,0,-2,0,1,-2,2,0,-3,0],[1,322,317,-299,-316,-1,-1,-5,0,5,-2,1,0,-4,-1],[2,324,319,-298,-315,-3,-1,-1,-3,1,0,3,-1],[3,326,321,-297,-314,-3,0,0,-4,-2,-1,2,-2,-3,0],[4,328,323,-296,-311,-4,-3,0,-3,-3,0,-1,-1,1,-2,-5,1],[5,332,327,-300,-312,-3,-2,0,-3,-5,-2,-1,-1,0,0,-2,-2,-2,-1],[6,335,333,-303,-315,-4,-3,-1,-2,-1,-2,-4,-1,-1,-2,-2,0,-4,-3,1,0,-7,-1,0,-1,-1,-1],[7,338,338,-308,-317,-3,-4,0,0,-2,-3,-4,-3,-3,-1,-1,-2,-3,0,-2,-2,-4,-2,0,1,0,-1],[8,339,343,-310,-319,-3,-3,0,-2,-2,-2,-5,-5,-2,-1,-2,-3,-4,-1,-1,-1,-2,-1,0,0],[9,339,347,-312,-320,-2,-4,-1,-1,-2,-4,-2,-2,-4,-4,-3,-1,-5,-4,-1,-2,1,1,-2,-1],[10,338,350,-314,-320,0,-3,-2,-2,-2,-4,-2,-2,-4,-4,-3,-4,-4,-4,-2,-3,1,2,0,1],[11,337,353,-315,-323,0,-1,-1,-2,-3,-4,-1,-2,-4,-5,-3,-5,-4,-2,-1,-5,0,1],[12,335,354,-314,-323,-1,0,0,-2,-4,-5,-1,-1,-3,-5,-3,-5,-3,-4,-3,-4,2,2],[13,332,354,-314,-321,-1,-2,-1,0,-2,-4,0,0,-4,-6,-2,-7,-2,-1,-3,-8,1,3],[14,328,353,-312,-320,-3,-1,0,0,-2,-3,-1,0,-2,-4,-1,-4,-2,-5,-2,-6,0,0],[15,320,350,-313,-321,1,3,-2,-1,0,1,-1,-2,-2,0,0,1,-1,-4,-1,-5,0,2,-3,-5,2,6,0,0],[16,312,345,-310,-319,-1,4,0,-5,-1,5,-2,-3,0,3,-2,1,-1,0,0,-4,-1,-2,-2,1,1,2,-2,-2],[17,306,340,-310,-319,-1,3,-1,-4,0,3,0,-2,-2,3,0,0,-2,4,-1,-1,-1,-3,1,-1,-2,-3,-1,4],[18,302,336,-311,-320,-1,2,1,-3,-1,0,-1,1,0,-2,-2,2,-2,-1,1,-2,-1,0,0,-1,2,-2,-1,0],[19,299,332,-310,-318,-1,1,1,-2,1,-1,-3,1,0,-2,0,2,-2,0,1,-3,1,1,-1,-1],[20,297,329,-310,-318,-1,0,1,0,2,-3,-2,2,-3,-2,2,0,-1,1,2,-3,-1,2,0,-2],[21,295,327,-309,-319,-2,0,2,0,1,-2,-3,1,2,-1,0,0,-2,0,4,-2,-2,1],[22,293,323,-309,-317,-1,-1,1,-1,2,-1,-4,0,2,-1,0,0,0,-1,2,0],[23,291,319,-309,-317,-1,-1,1,0,4,-1,-5,0,3,0,-1,0,3,-1],[24,291,316,-312,-318,1,0,2,0,0,-2,0,2,2,-1,-2,0,3,-1],[25,291,313,-314,-319,2,1,2,-1,2,0,-1,0,1,0,-1,-1],[26,292,310,-316,-319,2,-2,4,2,0,0,-1,-3,3,3,-2,-1],[27,294,309,-319,-322,3,2,3,-1,2,1,0,1],[28,295,308,-319,-324,3,2,4,1,0,-2],[29,298,306,-320,-323,2,0,3,2,2,1],[30,299,306,-317,-325,-1,0,4,3,0,-1],[31,302,305,-318,-325,1,1,1,-2,4,3],[32,304,305,-317,-325,0,1,2,-2,0,2],[33,305,305,-314,-323,1,-1,0,0,1,0],[34,307,306,-314,-325,3,3,0,-2,-2,0,4,4,-1,1],[35,311,308,-310,-323,-1,1,-1,-3,0,2,-1,1,0,1,1,1],[36,313,309,-308,-321,-1,0,0,-3,0,2,0,2,-2,0,1,0],[37,315,311,-307,-321,1,0,-1,-1,1,2,-2,-1,1,0,-1,2],[38,317,313,-304,-320,0,0,-1,0,1,-1,-1,0,-3,1,2,1],[39,319,314,-303,-318,0,-1,-3,0,5,0,-3,-1,-2,1]],[[0,322,316,-302,-317,-1,0,-2,-2],[1,324,318,-303,-318,0,0,-2,0],[2,326,320,-304,-318,2,1,-4,-2],[3,329,322,-304,-315,1,-2,-4,-2],[4,332,326,-305,-316,0,-2,-2,-3],[5,334,329,-306,-316,-1,-1,-1,-3],[6,336,333,-308,-316,-1,-2,-2,-2,-1,-3],[7,337,338,-308,-319,-4,-1,-1,-2,0,-2,-8,-3],[8,338,343,-310,-319,-5,-6,0,-1,0,1,-6,-7,-2,0,1,0],[9,337,347,-311,-321,-4,-4,0,-4,-1,0,-3,-3,-1,-1,-4,-4,-2,-3,-2,2,-2,-5],[10,336,348,-312,-319,-3,-4,-2,-2,-1,-2,-1,-2,-2,-3,-3,-3,-2,-5,-4,-2,0,0],[11,335,351,-313,-322,-3,-2,0,-2,-2,-3,-2,-3,0,0,-4,-6,-2,-3,-4,-4,0,1],[12,334,352,-313,-322,-5,-3,3,1,-4,-5,0,-2,-2,0,-4,-8,-1,-1,-3,-5,0,0],[13,332,354,-316,-324,1,-1,-2,0,-2,-5,0,2,-3,-4,-2,-7,0,2,-4,-11,0,2],[14,328,354,-313,-324,-2,0,1,2,-4,-8,1,3,-4,-6,0,-1,-2,2,-2,-10,0,-4],[15,320,351,-313,-324,0,5,1,-3,-3,2,-1,-8,-1,2,0,2,0,-1,-2,-5,-2,-5],[16,312,346,-310,-322,-2,6,0,-7,0,8,0,-11,-1,6,-2,1,0,2,-1,-5,0,-4],[17,306,342,-309,-323,-2,5,0,-5,-2,4,3,-6,-2,6,0,0,-2,4,0,-1,2,-6],[18,301,337,-309,-321,-2,0,1,-1,0,-1,0,0,-2,0,1,0,-3,3],[19,298,333,-308,-320,-1,1,0,0,1,-3,0,1,-1,0,0,-1],[20,296,331,-308,-321,-1,0,0,0,3,-2,-3,1,1,0],[21,294,327,-308,-319,-1,0,1,-1,4,0,-4,-2,0,1],[22,293,323,-309,-316,1,-2,-1,0,3,-3,0,1,-4,0],[23,293,318,-313,-316,3,-1,-1,0,4,-1,-1,0],[24,293,315,-316,-317,4,0,2,1,2,-1,-1,-1],[25,293,313,-316,-318,2,1,4,-1,0,-1],[26,294,312,-320,-322,6,4,2,-2],[27,295,310,-321,-322,6,1],[28,296,309,-320,-324,3,1],[29,298,307,-318,-324,2,1],[30,299,307,-316,-326,0,1],[31,302,307,-318,-328,3,3],[32,303,307,-315,-328,1,3],[33,305,307,-314,-326,2,1],[34,307,307,-312,-325,1,3,0,-1],[35,310,308,-309,-322,-1,0,0,0],[36,313,309,-309,-321,0,-1,1,2,-3,2],[37,315,311,-307,-321,1,0,-2,1,-2,2],[38,318,313,-304,-319,-1,-1,-3,0,-2,2],[39,320,314,-305,-318,1,-1,-2,1]]];var Mt=class{p;q;nl;nr;constructor(e,t,r,n){this.p=e,this.q=t,this.nl=r,this.nr=n}},rt=class{root=null;k;constructor(e,t=2){this.k=t,this.root=this.#e(e,0)}#e(e,t){if(e.length===0)return null;let r=t%this.k;e.sort(([i],[o])=>i[r]-o[r]);let n=Math.floor(e.length/2);return new Mt(e[n][0],e[n][1],this.#e(e.slice(0,n),t+1),this.#e(e.slice(n+1),t+1))}#t(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}neighbors(e,t){let r=[],n=(i,o)=>{if(i===null)return;let a=o%this.k,u=this.#t(e,i.p);r.length<t?(r.push({n:i,d:u}),r.sort((c,f)=>c.d-f.d)):u<r[r.length-1].d&&(r[r.length-1]={n:i,d:u},r.sort((c,f)=>c.d-f.d));let m=e[a]<i.p[a]?i.nl:i.nr,l=m===i.nl?i.nr:i.nl;n(m,o+1),(r.length<t||Math.abs(e[a]-i.p[a])<r[r.length-1].d)&&n(l,o+1)};return n(this.root,0),r.map(i=>[i.n.q,i.d])}};var H=24,ir=.01,Kr=["","pR","R","yR","rO","O","yO","rY","Y","gY","YG","yG","G","bG","GB","GB","gB","B","B","pB","V","bP","P","rP","RP"],Zr=["p","p+","ltg","g","dkg","lt","lt+","sf","d","dk","b","s","dp","v","none"],q=[96,0,4,7,10,14,18,22,25,28,33,38,43,49,55,60,65,70,73,76,79,83,87,91,96,100],nr=[[.853642,.084379,-.002798],[1.042805,.046437,.001607],[1.07916,.02547,.003052],[1.039472,.054749,-511e-6],[.925185,.050245,953e-6],[.968557,.012537,.003375],[1.070433,-.047359,.007385],[1.08703,-.051075,.006526],[1.089652,-.050206,.006056],[.880861,.0603,-.00128],[.897326,.053912,-86e-5],[.887834,.055086,-847e-6],[.853642,.084379,-.002798]],Qr=Object.freeze({Concise:{calcMunsellH:on,calcMunsellS:an,calcPccsH:sn,calcPccsS:or},Accurate:{calcMunsellH:rn,calcMunsellC:nn,calcPccsH:Jr,calcPccsS:en}});var nt=Qr.Accurate;function Jr(s){let e=-1,t=-1;for(let r=1;r<q.length;++r)if(q[r]<=s&&(e=r),s<q[r]){t=r;break}return e===-1&&console.error("h1 is -1, H = "+s),t===-1&&console.error("h2 is -1, H = "+s),e+(t-e)*(s-q[e])/(q[t]-q[e])}function en(s,e,t){let r=sr(t),n=.81-.24*Math.sin((t-2.6)/12*Math.PI),i=-e/(1-Math.exp(-n*s));return tn(or(s,e,t),r[3],r[2],r[1],i)}function sr(s){H<s&&(s-=H);let e=0|Math.floor(s);e%2!==0&&--e;let t=e+2;H<t&&(t-=H);let r=nr[e/2],n=nr[t/2],i=[0,0,0,0];for(let o=0;o<3;++o)i[o+1]=(s-e)/(t-e)*(n[o]-r[o])+r[o];return i}function tn(s,e,t,r,n){let i=s;for(;;){let o=e*i*i*i+t*i*i+r*i+n,a=3*e*i*i+2*t*i+r,u=-o/a+i;if(Math.abs(u-i)<.001)break;i=u}return i}function rn(s){let e=0|Math.floor(s),t=e+1,r=q[e],n=q[t];return r>n&&(n=100),r+(n-r)*(s-e)/(t-e)}function nn(s,e,t){let r=sr(s),n=.81-.24*Math.sin((s-2.6)/12*Math.PI);return(r[3]*t*t*t+r[2]*t*t+r[1]*t)*(1-Math.exp(-n*e))}function sn(s){let e=s*Math.PI/50;return 24*e/de+1.24+.02*Math.cos(e)-.1*Math.cos(2*e)-.11*Math.cos(3*e)+.68*Math.sin(e)-.3*Math.sin(2*e)+.013*Math.sin(3*e)}function or(s,e,t){let r=12+1.7*Math.sin((t+2.2)*Math.PI/12),n=.81-.24*Math.sin((t-2.6)*Math.PI/12),i=.004,o=.077,a=-e/(r*(1-Math.exp(-n*s)));return(-o+Math.sqrt(o*o-4*i*a))/(2*i)}function on(s){let e=(s-1)*Math.PI/12;return 100*e/de-1+.12*Math.cos(e)+.34*Math.cos(2*e)+.4*Math.cos(3*e)-2.7*Math.sin(e)+1.5*Math.sin(2*e)-.4*Math.sin(3*e)}function an(s,e,t){let r=12+1.7*Math.sin((s+2.2)*Math.PI/12),n=.81-.24*Math.sin((s-2.6)*Math.PI/12);return r*(.077*t+.004*t*t)*(1-Math.exp(-n*e))}function it([s,e,t],r=[0,0,0]){let n=0,i=0;return S<=s&&(s-=S),n=nt.calcPccsH(s),Te<=t&&(i=nt.calcPccsS(e,t,n)),H<=n&&(n-=H),r[0]=n,r[1]=e,r[2]=i,r}function st([s,e,t],r=[0,0,0]){let n=0,i=0;return n=nt.calcMunsellH(s),ir<=t&&(i=nt.calcMunsellC(s,e,t)),n<0&&(n+=S),S<=n&&(n-=S),r[0]=n,r[1]=e,r[2]=i,r}function un(s){let e=s[2],t=ar(s),r=e*-3/10+8.5,n=e*3/10+2.5;return e<1?14:1<=e&&e<4?t<n?4:t<5.5?3:t<r?2:e<2.5?0:1:4<=e&&e<7?t<n?9:t<5.5?8:t<r?7:e<5.5?5:6:7<=e&&e<8.5?t<n?12:t<r?11:10:13}function ar([s,e,t]){return e-(.25-.34*Math.sqrt(1-Math.sin((s-2)*Math.PI/12)))*t}function ln([s,e,t]){return e+(.25-.34*Math.sqrt(1-Math.sin((s-2)*Math.PI/12)))*t}function ur(s,e=[0,0,0]){return e[0]=s[0],e[1]=ar(s),e[2]=s[2],e}function lr(s,e=[0,0,0]){return e[0]=s[0],e[1]=ln(s),e[2]=s[2],e}function mr(s){let e=Math.round(s[1]*10)/10;if(s[2]<ir)return 9.5<=s[1]?`W N-${e}`:s[1]<=1.5?`Bk N-${e}`:`Gy-${e} N-${e}`;{let t=Math.round(s[0]*10)/10,r=Math.round(s[2]*10)/10,n=Math.round(s[0]);n<=0&&(n=H),H<n&&(n-=H);let i=Kr[n],o=Zr[un(s)];return o==="none"?`${t}:${i}-${e}-${r}s`:`${o}${t} ${t}:${i}-${e}-${r}s`}}function Y(s){return Math.abs(s)<fr}function Pt(s,e){return Math.abs(s-e)<fr}function Ve(s,e,t){return[(e[0]-s[0])*t+s[0],(e[1]-s[1])*t+s[1]]}function Et(s,e,t,r){return s*r-e*t}function Me(s,e,t,r){return!(Et(s[0]-e[0],s[1]-e[1],t[0]-e[0],t[1]-e[1])<0||Et(s[0]-t[0],s[1]-t[1],r[0]-t[0],r[1]-t[1])<0||Et(s[0]-r[0],s[1]-r[1],e[0]-r[0],e[1]-r[1])<0)}var mn=["R","YR","Y","GY","G","BG","B","PB","P","RP"],fr=1e-13,Se=[.3101,.3162],De,me,at=[];var S=100,Te=.05,w=!1;cn(E,rr);function cn(s,e){me=new Array(s.length),De=new Array(s.length),at=new Array(s.length);for(let r=0;r<s.length;r+=1){me[r]=new Array(1e3/25),De[r]=new Array(1e3/25),De[r].fill(0);for(let i=0,o=1e3/25;i<o;i+=1)me[r][i]=new Array(50/2+2),me[r][i].fill(null);let n=[];for(let i of e[r]){let o=i.shift();t(i),t(i);for(let a=0;a<i.length;a+=2){let u=a/2+1,m=i[a+0]/1e3,l=i[a+1]/1e3;me[r][o][u]=[m,l],n.push([[m,l],[o*25,u*2]])}De[r][o]=i.length-2}at[r]=new rt(n)}function t(r){let n=0,i=0;for(let o=0;o<r.length;o+=2)n+=r[o],i+=r[o+1],r[o]=n,r[o+1]=i}}function v(s,e,t){return t===0?Se:(1e3<=e&&(e-=1e3),me[s][e/25][t/2])}function cr(s,e){return 1e3<=e&&(e-=1e3),e<0&&(e+=1e3),De[s][e/25]}function br(s){if(s<=1)return s*.0121;let e=s*s;return(.0467*(e*s)+.5602*e-.1753*s+.8007)/100}function fn(s){if(s<=.0121)return s/.0121;let e=10;for(let t=0;t<1e3;++t){let r=br(e)-s,n=e<=1?.0121:(3*.0467*(e*e)+2*.5602*e-.1753)/100;if(Math.abs(r)<1e-4)break;e=e-r/n}return e}function bn([s,e,t]){let r=fn(t);if(w=!1,Pt(r,E.at(-1))){let[b,p]=vt(s,e,E.length-1);return[b,r,p]}if(Y(r)||E.at(-1)<r||Pt(s,Se[0])&&Pt(e,Se[1]))return[0,r,0];let n=-1;for(;E[n+1]<=r;)++n;let i=[0,0];n!==-1&&(i=vt(s,e,n));let o=n+1,a=vt(s,e,o);n===-1&&(i[0]=a[0],i[1]=0);let u=n===-1?0:E[n],m=E[o],l=(r-u)/(m-u),[c,f]=hr(i,a,l);return[c,r,f]}function vt(s,e,t){let r=[s,e],[[n]]=at[t].neighbors(r,1),i=n[0]-125,o=n[0]+125;i<0&&o<i+1e3&&(i+=1e3,o+=1e3);for(let u=i;u<=o;u+=25)e:for(let m=0;m<=50;m+=2){let[l,c]=hn(r,t,u,m);if(c==="h")break e;if(l)return[(25*l[0]+u)/10,2*l[1]+m]}let a=at[t].neighbors(r,2);if(a.length===2){w=!0;let[[[u,m],l],[[c,f],b]]=a,p=l/(l+b);return hr([u/10,m],[c/10,f],p)}return[0,0]}function hn(s,e,t,r){let n=null,i=v(e,t,r),o=v(e,t+25,r),a=v(e,t+25,r+2),u=v(e,t,r+2);if(i===null&&o===null)return[null,"h"];if(r!==0&&(i&&o&&a&&!u?u=[i[0]+(a[0]-o[0]),i[1]+(a[1]-o[1])]:i&&o&&!a&&u&&(a=[o[0]+(u[0]-i[0]),o[1]+(u[1]-i[1])])),i===null||o===null||a===null||u===null)return[null,""];return r===0?Me(s,i,a,u)&&(n=m(s,i,u,o,a)):(Me(s,i,a,u)||Me(s,i,o,a))&&(n=m(s,i,u,o,a)),[n,""];function m(l,c,f,b,p){let h=-1,L=(c[0]-f[0])*(c[1]+p[1]-b[1]-f[1])-(c[0]+p[0]-b[0]-f[0])*(c[1]-f[1]),d=(l[0]-c[0])*(c[1]+p[1]-b[1]-f[1])+(c[0]-f[0])*(b[1]-c[1])-(c[0]+p[0]-b[0]-f[0])*(l[1]-c[1])-(b[0]-c[0])*(c[1]-f[1]),C=(l[0]-c[0])*(b[1]-c[1])-(l[1]-c[1])*(b[0]-c[0]);if(Y(L))Y(d)||(h=-C/d);else{let R=Math.sqrt(d*d-4*L*C),A=(-d+R)/(2*L),P=(-d-R)/(2*L);c[0]===b[0]&&c[1]===b[1]?0<=P&&P<=1&&(h=P):0<=A&&A<=1?h=A:0<=P&&P<=1&&(h=P)}if(h<0)return null;let y=-1,M=-1,T=-1,V=(c[0]-f[0]-b[0]+p[0])*h-c[0]+b[0],X=(c[1]-f[1]-b[1]+p[1])*h-c[1]+b[1];return Y(V)||(M=((c[0]-f[0])*h+l[0]-c[0])/V),Y(X)||(T=((c[1]-f[1])*h+l[1]-c[1])/X),0<=M&&M<=1?y=M:0<=T&&T<=1&&(y=T),y<0?null:[y,h]}}function hr([s,e],[t,r],n){Math.abs(t-s)>S*.5&&(s<t?s+=S:s>t&&(t+=S));let i=(t-s)*n+s;S<=i&&(i-=S);let o=(r-e)*n+e;return o<Te&&(o=0),[i,o]}function pn([s,e,t]){S<=s&&(s-=S);let r=br(e);if(w=!1,Y(e)||s<0||t<Te)return w=Y(e)&&0<t,[...Se,r];let n=E.at(-1);if(n<=e){let b=wt(s,t,E.length-1);return w=n<e,[b[0],b[1],r]}let i=-1;for(;E[i+1]<=e;)++i;let o=i+1,a;i!==-1?a=wt(s,t,i):(a=[...Se,!1],w=!0);let u=wt(s,t,o),m=i===-1?0:E[i],l=E[o],c=(e-m)/(l-m);return!a[2]&&!u[2]?w=!0:(!a[2]||!u[2])&&(c<.5?a[2]||(w=!0):u[2]||(w=!0)),[...Ve(a,u,c),r]}function wt(s,e,t){let r=s*10,n=[r,e],i=0|Math.floor(e/2)*2,o=i+2,a=0|Math.floor(r/25)*25,u=a+25,m=0,l=0;for(;m===0&&(m=cr(t,a),m===0);a-=25);for(;l===0&&(l=cr(t,u),l===0);u+=25);if(e<m&&l<=e){for(let h=l;h<=m-2;h+=2)if(Me(n,[u,l],[a,h],[a,h+2]))return[...b(t,n,[u,l],[a,h],[a,h+2]),!0]}if(m<=e&&e<l){for(let h=m;h<=l-2;h+=2)if(Me(n,[a,m],[u,h+2],[u,h]))return[...b(t,n,[a,m],[u,h+2],[u,h]),!0]}if(m<=e||l<=e)return[...f(t,n,[a,m],[u,l]),!1];return[...p(t,n,[a,i],[u,i],[u,o],[a,o]),!0];function f(h,L,d,C){let y=(L[0]-d[0])/(C[0]-d[0]),M=v(h,...d),T=v(h,...C);return Ve(M,T,y)}function b(h,L,d,C,y){let M=(C[1]-y[1])*(d[0]-y[0])+(y[0]-C[0])*(d[1]-y[1]),T=((C[1]-y[1])*(L[0]-y[0])+(y[0]-C[0])*(L[1]-y[1]))/M,V=((y[1]-d[1])*(L[0]-y[0])+(d[0]-y[0])*(L[1]-y[1]))/M,X=1-T-V,R=v(h,...d),A=v(h,...C),P=v(h,...y);return[R[0]*T+A[0]*V+P[0]*X,R[1]*T+A[1]*V+P[1]*X]}function p(h,L,d,C,y,M){let T=(L[0]-d[0])/(C[0]-d[0]),V=(L[1]-d[1])/(M[1]-d[1]),X=v(h,...d),R=v(h,...C),A=v(h,...y),P=v(h,...M),Re=X===R?X:Ve(X,R,T),Ae=Ve(P,A,T);return Ve(Re,Ae,V)}}function ut(s,e=[0,0,0]){let t=bn(ae(dr(s,e),e));return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function lt([s,e,t],r=[0,0,0]){return gr(ue(pn([s,e,t]),r),r)}function gn(s,e){if(s===-1||Y(e))return"N";s<=0&&(s+=S);let t=(0|s*10)%100,r=0|s/10;return t===0&&(t=100,r-=1),Math.round(t*10)/100+mn[r]}function pr([s,e,t]){let r=Math.round(e*10)/10;if(t<Te)return`N ${r}`;{let n=gn(s,t),i=Math.round(t*10)/10;return`${n} ${r}/${i}`}}function gr([s,e,t],r=[0,0,0]){return r[0]=.9972812*s+-.0093756*e+-.0154171*t,r[1]=-.0010298*s+1.0007636*e+2084e-7*t,r[2]=.9209267*t,r}function dr([s,e,t],r=[0,0,0]){return r[0]=1.0027359*s+.0093941*e+.0167846*t,r[1]=.0010319*s+.9992466*e+-2089e-7*t,r[2]=1.0858628*t,r}function yr([s,e,t],r=[0,0,0]){return r[0]=0*s+2.02344*e+-2.52581*t,r[1]=0*s+1*e+0*t,r[2]=0*s+0*e+1*t,r}function Lr([s,e,t],r=[0,0,0]){return r[0]=1*s+0*e+0*t,r[1]=.494207*s+0*e+1.24827*t,r[2]=0*s+0*e+1*t,r}var xr=k([1,1,1]),Cr=k(F([1,1,1])),Pe=!1,mt=1,ct=1;function Rt(s,e=1,t=1){Pe=s,mt=e,ct=t}function zr(s,[e,t,r],n,i=[0,0,0]){let o=s/n[1],a=e/n[0],u=t/n[1],m=r/n[2],l=ct*o/(mt*a+ct*u);return i[0]=l*a*n[0],i[1]=l*u*n[1],i[2]=l*m*n[2],i}function Tr(s,[e,t,r],n,i=[0,0,0]){let o=s/n[0],a=e/n[0],u=t/n[1],m=r/n[2],l=mt*o/(mt*a+ct*u);return i[0]=l*a*n[0],i[1]=l*u*n[1],i[2]=l*m*n[2],i}function Vr(s,e=[0,0,0]){return yr(s,e),Pe&&zr(s[1],e,xr,e),e}function Dr(s,e=[0,0,0]){return Lr(s,e),Pe&&Tr(s[0],e,xr,e),e}function Mr([s,e,t],r=[0,0,0]){let n=[.992052*s+.003974,.992052*e+.003974,.992052*t+.003974],i=k(F(n));return yr(i,r),Pe&&zr(i[1],r,Cr,r),r}function Sr([s,e,t],r=[0,0,0]){let n=[.957237*s+.0213814,.957237*e+.0213814,.957237*t+.0213814],i=k(F(n));return Lr(i,r),Pe&&Tr(i[0],r,Cr,r),r}function At(s,e=[0,0,0]){return e[0]=s>>16&255,e[1]=s>>8&255,e[2]=s&255,e}function Ot([s,e,t]){return s<<16|e<<8|t|4278190080}function Er(s){let e=/rgba?\(\s*([\d.]+%?)\s*[,\s]\s*([\d.]+%?)\s*[,\s]\s*([\d.]+%?)\s*(?:\/\s*([\d.]+%?))?\s*\)/i,t=s.match(e);if(t){let r=t[1].endsWith("%")?parseFloat(t[1])*2.55:parseFloat(t[1]),n=t[2].endsWith("%")?parseFloat(t[2])*2.55:parseFloat(t[2]),i=t[3].endsWith("%")?parseFloat(t[3])*2.55:parseFloat(t[3]),o=1;return t[4]!==void 0&&(o=t[4].endsWith("%")?parseFloat(t[4])/100:parseFloat(t[4])),[Math.round(r),Math.round(n),Math.round(i),o]}return null}function vr(s){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$|^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,t=s.match(e);if(t){if(t[1]){let r=parseInt(t[1],16),n=parseInt(t[2],16),i=parseInt(t[3],16),o=t[4]?parseInt(t[4],16)/255:1;return[r,n,i,o]}if(t[5]){let r=parseInt(t[5]+t[5],16),n=parseInt(t[6]+t[6],16),i=parseInt(t[7]+t[7],16),o=t[8]?parseInt(t[8]+t[8],16)/255:1;return[r,n,i,o]}}return null}function wr(s){let e=/hsla?\(\s*([\d.]+)\s*[,\s]\s*([\d.]+)%\s*[,\s]\s*([\d.]+)%\s*(?:\/\s*([\d.]+%?))?\s*\)/i,t=s.match(e);if(t){let r=parseFloat(t[1]),n=parseFloat(t[2]),i=parseFloat(t[3]),o=1;return t[4]!==void 0&&(o=t[4].endsWith("%")?parseFloat(t[4])/100:parseFloat(t[4])),[r,n,i,o]}return null}function Xr(s){let e=/lab\(\s*([\d.]+)%?\s+([\d.-]+)\s+([\d.-]+)\s*(?:\/\s*([\d.]+))?\s*\)/i,t=s.match(e);if(t){let r=parseFloat(t[1]),n=parseFloat(t[2]),i=parseFloat(t[3]),o=1;return t[4]!==void 0&&(o=parseFloat(t[4])),[r,n,i,o]}return null}function Rr(s){let e=/lch\(\s*([\d.]+)%?\s+([\d.]+)\s+([\d.]+)(?:deg)?\s*(?:\/\s*([\d.]+))?\s*\)/i,t=s.match(e);if(t){let r=parseFloat(t[1]),n=parseFloat(t[2]),i=parseFloat(t[3]),o=1;return t[4]!==void 0&&(o=parseFloat(t[4])),[r,n,i,o]}return null}var ft=(f=>(f[f.Rgb=0]="Rgb",f[f.Hsl=1]="Hsl",f[f.Yiq=2]="Yiq",f[f.Lrgb=3]="Lrgb",f[f.Xyz=4]="Xyz",f[f.Xyy=5]="Xyy",f[f.Lab=6]="Lab",f[f.Lch=7]="Lch",f[f.Lms=8]="Lms",f[f.Munsell=9]="Munsell",f[f.Pccs=10]="Pccs",f[f.Tone=11]="Tone",f))(ft||{}),j=class s{static fromInteger(e){return new s(0,At(e|4278190080))}static fromString(e){let t=null;return(t=Er(e))?new s(0,[t[0],t[1],t[2]],t[3]):(t=vr(e))?new s(0,[t[0],t[1],t[2]],t[3]):(t=wr(e))?new s(1,[t[0],t[1],t[2]],t[3]):(t=Xr(e))?new s(6,[t[0],t[1],t[2]],t[3]):(t=Rr(e))?new s(7,[t[0],t[1],t[2]],t[3]):null}#e=new Map;#t=new Map;#r=null;#n=1;constructor(e=null,t=null,r=1){e!==null&&t!==null&&(this.#e.set(e,t),this.#r=e,this.#n=r)}toString(){if(this.#r===null)return"empty";let e=this.#e.get(this.#r);return`${ft[this.#r]} [${e[0]}, ${e[1]}, ${e[2]}] (${this.#n})`}set(e,t,r=1){this.#e.clear(),this.#t.clear(),this.#e.set(e,t),this.#r=e,this.#n=r}alpha(e=null){if(e===null)return this.#n;this.#n=e}as(e){switch(e){case 0:return this.asRgb();case 1:return this.asHsl();case 2:return this.asYiq();case 3:return this.asLrgb();case 4:return this.asXyz();case 5:return this.asXyy();case 6:return this.asLab();case 7:return this.asLch();case 8:return this.asLms();case 9:return this.asMunsell();case 10:return this.asPccs();case 11:return this.asTone()}}asRgb(){if(this.#e.has(0))return this.#e.get(0);let e;switch(this.#r){case 1:e=je(this.asHsl());break;default:e=Le(this.asLrgb());break}return this.#e.set(0,e),this.#t.set("rgb_saturation",xt),e}asHsl(){if(this.#e.has(1))return this.#e.get(1);let e=gt(this.asRgb());return this.#e.set(1,e),e}asYiq(){if(this.#e.has(2))return this.#e.get(2);let e=$e(this.asLrgb());return this.#e.set(2,e),e}asLrgb(){if(this.#e.has(3))return this.#e.get(3);let e;switch(this.#r){case 0:case 1:e=xe(this.asRgb());break;case 2:e=Ge(this.asYiq());break;default:e=Ce(this.asXyz());break}return this.#e.set(3,e),e}asXyz(){if(this.#e.has(4))return this.#e.get(4);let e=[0,0,0];switch(this.#r){case 0:case 1:case 2:case 3:e=F(this.asLrgb());break;case 7:case 6:e=ze(this.asLab());break;case 5:e=ue(this.asXyy()),this.#t.set("xyy_saturation",Ze);break;case 8:e=Ye(this.asLms());break;case 9:case 10:case 11:e=lt(this.asMunsell()),this.#t.set("munsell_saturation",w);break}return this.#e.set(4,e),e}asXyy(){if(this.#e.has(5))return this.#e.get(5);let e=ae(this.asXyz());return this.#e.set(5,e),e}asLab(){if(this.#e.has(6))return this.#e.get(6);let e;switch(this.#r){case 7:e=Je(this.asLch());break;default:e=et(this.asXyz());break}return this.#e.set(6,e),e}asLch(){if(this.#e.has(7))return this.#e.get(7);let e=Qe(this.asLab());return this.#e.set(7,e),e}asLms(){if(this.#e.has(8))return this.#e.get(8);let e=k(this.asXyz());return this.#e.set(8,e),e}asMunsell(){if(this.#e.has(9))return this.#e.get(9);let e;switch(this.#r){case 10:case 11:e=st(this.asPccs());break;default:e=ut(this.asXyz()),this.#t.set("munsell_saturation",w);break}return this.#e.set(9,e),e}asPccs(){if(this.#e.has(10))return this.#e.get(10);let e;switch(this.#r){case 11:e=lr(this.asTone());break;default:e=it(this.asMunsell());break}return this.#e.set(10,e),e}asTone(){if(this.#e.has(11))return this.#e.get(11);let e=ur(this.asPccs());return this.#e.set(11,e),e}isRGBSaturated(e=!1){return e&&!this.#t.has("rgb_saturation")&&this.asRgb(),this.#t.get("rgb_saturation")??!1}isXyySaturated(){return this.#t.get("xyy_saturation")??!1}isMunsellSaturated(){return this.#t.get("munsell_saturation")??!1}asMunsellNotation(){if(this.#t.has("munsell_notation"))return this.#t.get("munsell_notation");let e=pr(this.asMunsell());return this.#t.set("munsell_notation",e),e}asPCCSNotation(){if(this.#t.has("pccs_notation"))return this.#t.get("pccs_notation");let e=mr(this.asPccs());return this.#t.set("pccs_notation",e),e}asInteger(){if(this.#t.has("integer"))return this.#t.get("integer");let e=Ot(this.asRgb());return this.#t.set("integer",e),e}asConspicuity(){if(this.#t.has("conspicuity"))return this.#t.get("conspicuity");let e=jt(this.asLab());return this.#t.set("conspicuity",e),e}asCategory(){if(this.#t.has("category"))return this.#t.get("category");let e=qt(this.asXyy());return this.#t.set("category",e),e}differenceFrom(e,t="ciede2000"){switch(t){case"sqrt":return Wt(this.asLab(),e.asLab());case"cie76":return Kt(this.asLab(),e.asLab());case"ciede2000":default:return Zt(this.asLab(),e.asLab())}}toMonochrome(){return new s(6,[this.asLab()[0],0,0])}toProtanopia(e="lrgb",t=!1){switch(Rt(t),e){case"lms":let r=Vr(this.asLms());return new s(8,r);case"lrgb":default:let n=Mr(this.asLrgb());return new s(8,n)}}toDeuteranopia(e="lrgb",t=!1){switch(Rt(t),e){case"lms":let r=Dr(this.asLms());return new s(8,r);case"lrgb":default:let n=Sr(this.asLrgb());return new s(8,n)}}};var D=class s{static newInstance(e){let t=new j(6,e);return t.isRGBSaturated(!0)?null:new s(t)}#e;#t;#r;#n;lab;labP;labD;tone;constructor(e){e instanceof j?this.#e=e:this.#e=j.fromInteger(e),this.#t=this.#e.toProtanopia(),this.#r=this.#e.toDeuteranopia(),this.#n=new j(6,[this.#e.asLab()[0],0,0]),this.lab=this.#e.asLab(),this.labP=this.#t.asLab(),this.labD=this.#r.asLab(),this.tone=this.#e.asTone()}getColor(e=0){switch(e){case 1:return this.#t;case 2:return this.#r;case 3:return this.#n;default:return this.#e}}differenceFrom(e,t=0){switch(t){case 1:return this.#t.differenceFrom(e.#t);case 2:return this.#r.differenceFrom(e.#r);case 3:return this.#n.differenceFrom(e.#n);default:return this.#e.differenceFrom(e.#e)}}};var Nt=class{constructor(e,t,r,n,i,o){this.index1=e;this.c1=t;this.index2=r;this.c2=n;this.diff=i;this.vision=o}},Ee=class s{static createAllAdjacencyList(e){let t=[];for(let r=0;r<e;++r)for(let n=r+1;n<e;++n)t.push([r,n]);return t}#e;#t=[];#r;#n;#i;#s;#u;#o;#a;#l;#m;constructor(e,t=null,r=null,n=1){t===null&&(t=s.createAllAdjacencyList(e.length)),this.#e=[...t];for(let i of e)this.#t.push(new D(i));r===null?(this.#r=new Array(this.#t.length),this.#r.fill(!1)):this.#r=[...r],this.#f(),this.#n=this.#b(),this.#i=n}setFixedFlags(e){this.#r=[...e]}setQualityInternally(e){this.#i=e}#f(){let e=this.#c(),t=0;for(let r=0;r<e.length;++r)e[r]<e[t]&&(t=r);this.#u=t,this.#s=e[t]}#c(){let e=new I(0,100,-127,127,-127,127);for(let r=0;r<this.#t.length;++r)e.addSite(this.getColor(r).asLab());e.createCells(this.getAdjacencyTable());let t=[];for(let r=0;r<this.#t.length;++r)t.push(e.countGrids(r,5));return t}#b(){let e=[],t=this.getAdjacencyTable();return this.#o=this.addCombinations(t,0,e),this.#a=this.addCombinations(t,1,e),this.#l=this.addCombinations(t,2,e),this.#m=this.addCombinations(t,3,e),e.sort((r,n)=>r.diff<n.diff?-1:r.diff>n.diff?1:0),e}addCombinations(e,t,r){let n=null;for(let i=0;i<e.length;++i)for(let o of e[i]){if(i>=o)continue;let a=this.getDifference(i,o,t),u=new Nt(i,this.getColor(i,t).asInteger(),o,this.getColor(o,t).asInteger(),a,t);r.push(u),(n==null||a<n.diff)&&(n=u)}return n}getAdjacencies(){return[...this.#e]}getAdjacencyTable(e=-1){let t=[];for(let r=0;r<this.#t.length;++r){let n=[];for(let[i,o]of this.#e)i===e||o===e||(i===r?n.push(o):o===r&&n.push(i));t.push(n)}return t}getConspicuityArray(){let e=[],t=Number.MAX_VALUE,r=Number.MIN_VALUE;for(let n=0;n<this.#t.length;++n){let i=this.#t[n].getColor().asConspicuity();i<t?t=i:r<i&&(r=i)}for(let n=0;n<this.#t.length;++n)e.push((this.#t[n].getColor().asConspicuity()-t)/(r-t));return e}size(){return this.#t.length}isFixed(e){return this.#r[e]}getColor(e,t=0){return this.#t[e].getColor(t)}[Symbol.iterator](){return this.#t[Symbol.iterator]()}getBottleneckIndex(){return this.#u}getBottleneckSize(){return this.#s}getDifference(e,t,r=0){return this.#t[e].differenceFrom(this.#t[t],r)}getLowestDifferenceCombination(e=0){if(e===null){let t=this.#o;return this.#a.diff<t.diff&&(t=this.#a),this.#l.diff<t.diff&&(t=this.#l),this.#m.diff<t.diff&&(t=this.#m),t}switch(e){case 1:return this.#a;case 2:return this.#l;case 3:return this.#m;default:return this.#o}}getCombinationList(e,t,r,n){let i=[];for(let o of this.#n)(e&&o.vision==0||t&&o.vision==1||r&&o.vision==2||n&&o.vision==3)&&i.push(o);return i}getLowestDifference(e){switch(e){case 1:return this.#a.diff;case 2:return this.#l.diff;case 3:return this.#m.diff;default:return this.#o.diff}}totalDifferenceFrom(e){let t=0;for(let r=0;r<this.#t.length;++r)t+=this.#t[r].differenceFrom(e.#t[r]);return t}getQuality(){return this.#i}aveNablaE(e){let t=0;for(let[r,n]of this.#e){let i=this.#t[r].differenceFrom(this.#t[n]),o=this.getDifference(r,n,e);t+=Math.abs(i-o)/i}return t/this.#e.length}static aveDeltaE(e,t){let r=0;for(let n=0;n<e.#t.length;++n){let i=e.#t[n].differenceFrom(t.#t[n]);r+=i}return r/e.size()}static aveDeltaH(e,t){let r=0;for(let n=0;n<e.#t.length;++n){let i=e.getColor(n).asPccs(),o=t.getColor(n).asPccs(),a=Math.abs(o[0]-i[0]),u=Math.min(a,24-a);r+=u}return r/e.size()}static aveDeltaT(e,t){let r=0;for(let n=0;n<e.#t.length;++n){let i=e.getColor(n).asPccs(),o=t.getColor(n).asPccs();r+=Math.sqrt((o[1]-i[1])*(o[1]-i[1])+(o[2]-i[2])*(o[2]-i[2]))}return r/e.size()}toString(){let e=["T","P","D","M"],t=Object.keys(W).map(i=>parseInt(i)).filter(i=>!isNaN(i)),r=this.getLowestDifferenceCombination(),n="";for(let[i,o]of t.entries()){let a=this.getLowestDifferenceCombination(o);n+=`${a==r?"*":" "}${e[i]}<${String(a.index1).padStart(2,"0")}, ${String(a.index2).padStart(2,"0")}>${a.diff.toFixed(2)}`,i<t.length-1&&(n+=", ")}return n}};var ve=class{#e;#t;#r;#n;#i;#s;#u;#o;#a;#l;#m;#f;#c;#b;#p;#g;#d;#y;constructor(e,t){this.#e=t.doCheckVision(0),this.#t=t.doCheckVision(1),this.#r=t.doCheckVision(2),this.#n=t.doCheckVision(3),this.#i=t.getTargetDifference(0),this.#s=t.getTargetDifference(1),this.#u=t.getTargetDifference(2),this.#o=t.getTargetDifference(3);let r=[0];this.#e&&r.push(this.#i-e.getLowestDifference(0)),this.#t&&r.push(this.#s-e.getLowestDifference(1)),this.#r&&r.push(this.#u-e.getLowestDifference(2)),this.#n&&r.push(this.#o-e.getLowestDifference(3)),this.#a=Math.max(...r),this.#l=t.doPreserveHue(),this.#m=t.getHueTolerance(),this.#f=t.getMaximumHueDifference(),this.#c=t.doPreserveTone(),this.#b=t.getToneTolerance(),this.#p=t.getMaximumToneDifference(),this.#g=t.doCheckConspicuity(),this.#d=t.getConspicuityRate(),this.#y=this.#g?e.getConspicuityArray():[]}newInstance(e,t,r,n,i=-1){return new It(this,e,t,r,n,i)}sepScale(e,t){let r=1024,n=1024,i=1024,o=1024;return this.#e&&(r=this.#h(e.differenceFrom(t),this.#i)),this.#t&&(n=this.#h(e.differenceFrom(t,1),this.#s)),this.#r&&(i=this.#h(e.differenceFrom(t,2),this.#u)),this.#n&&(o=this.#h(e.differenceFrom(t,3),this.#o)),Math.min(r,n,i,o)}#h(e,t){return 1-(t-e)/this.#a}preScale(e,t,r){if(!this.#l&&!this.#c)return 1;let[n,i,o]=t.tone,[a,u,m]=r.tone,l=1024,c=1024;if(this.#l){let f=Math.abs(a-n);l=this.#L(e,f,this.#m,this.#f)}if(this.#c){let f=Math.sqrt((u-i)*(u-i)+(m-o)*(m-o));c=this.#L(e,f,this.#b,this.#p)}return Math.min(l,c)}#L(e,t,r,n){return this.#g&&(r=r*(1-this.#d*this.#y[e])),(n-t)/(n-r)}},It=class{#e;#t;#r;#n;#i;#s;#u;#o;constructor(e,t,r,n,i,o){this.#e=e,this.#t=o,this.#r=t,this.#n=r,this.#i=n,this.#s=i,this.#u=n.getOriginal(),this.#o=i.getOriginal()}satisfactionDegree(e,t){let r=this.#i.values()[e],n=this.#s.values()[t],i=this.#a(this.#e.sepScale(r,n)),o=this.#t===0||e===0?1:this.#a(this.#e.preScale(this.#r,this.#u,r)),a=this.#t===1||t===0?1:this.#a(this.#e.preScale(this.#n,this.#o,n));return Math.min(i,o,a)}#a(e){return 1/(1+Math.exp(-12*(e-.5)))}};var N=class{#e=null;#t=[];getOriginal(){return this.#e!==null?this.#e:this.#t[0]}setOriginal(e){this.#e=e}isOriginalAssigned(){return this.#e!==null}values(){return this.#t}};var B=class s{static DEBUG=!1;static MAX_DELTA_HUE=12;static MAX_DELTA_TONE=Math.sqrt(10*10+10*10);#e;#t;#r;#n;#i;#s;constructor(e,t){this.#e=e,this.#t=t.getResolution(),this.#r=t.doPreserveHue(),this.#n=t.doPreserveTone(),this.#i=Math.min(t.getHueTolerance()*2,s.MAX_DELTA_HUE),this.#s=Math.min(t.getToneTolerance()*2,s.MAX_DELTA_TONE)}build(e=-1){let t=[],r=this.#e.getAdjacencyTable(e),n=this.#a(r);if(e===-1)for(let i=0;i<this.#e.size();++i){let o=new N;if(!this.#e.isFixed(i)){let a=n.getGrids(i,this.#t),u=this.#u(r,i);for(let m of a){let l=D.newInstance(m);l!==null&&this.#l(i,l,u)&&o.values().push(l)}}if(!o.values().length){let a=this.#e.getColor(i).asLab(),u=D.newInstance(a);u!==null&&o.values().push(u)}t.push(o)}else{let i=0,o=-1;for(let a=0;a<this.#e.size();++a){if(a===e){t.push(null);continue}let u=new N,m=n.getGrids(a,this.#t);if(!this.#e.isFixed(a)){let l=this.#u(r,a);for(let c of m){let f=D.newInstance(c);f!==null&&this.#l(a,f,l)&&u.values().push(f)}}if(!u.values().length){let l=this.#e.getColor(a).asLab(),c=D.newInstance(l);c!==null&&u.values().push(c)}t.push(u),i<m.length&&(i=m.length,o=a)}t[e]=this.#o(o,n),t[e].setOriginal(D.newInstance(this.#e.getColor(e).asLab()))}if(s.DEBUG)for(let i of t)console.log("Candidate size: "+i.values().length);return this.#m(t),t}#u(e,t){let r=e[t],n=0;for(let i of r){let o=this.#e.getDifference(t,i);n<o&&(n=o)}return s.DEBUG&&console.log("DomainFactory: Max Distance: "+n),n}#o(e,t){let r=new N,n=t.getGrids(e,this.#t);for(let i of n){let o=D.newInstance(i);o&&r.values().push(o)}return r}#a(e){let t=new I(0,100,-127,127,-127,127);for(let r=0;r<this.#e.size();++r)t.addSite(this.#e.getColor(r).asLab());return t.createCells(e),t}#l(e,t,r){if(r<this.#e.getColor(e).differenceFrom(t.getColor()))return!1;let n=this.#e.getColor(e).asTone(),i=t.getColor().asTone();if(this.#r){let o=Math.abs(i[0]-n[0]),a=Math.min(o,24-o);if(this.#i<a)return!1}if(this.#n){let o=(i[1]-n[1])*(i[1]-n[1])+(i[2]-n[2])*(i[2]-n[2]);if(this.#s*this.#s<o)return!1}return!0}#m(e){if(s.DEBUG)for(let t of e)console.log("DomainFactory: Candidate Size: "+t.values().length)}};var we=class{#e;#t;#r;#n;#i=1;#s=Number.NaN;#u;#o;#a;#l;#m;#f;#c;constructor(e,t,r=-1){this.#e=e,this.#t=t.doCheckVision(1),this.#r=t.doCheckVision(2),this.#n=t.doCheckVision(3),this.#u=t.doPreserveHue(),this.#o=t.getHueTolerance(),this.#a=Math.min(this.#o*2,B.MAX_DELTA_HUE),this.#l=t.doPreserveTone(),this.#m=t.getToneTolerance(),this.#f=Math.min(this.#m*2,B.MAX_DELTA_TONE),this.#c=r}newInstance(e,t,r,n,i=-1){return i!==0&&i!==1&&this.#b(r,n),new kt(this,this.#i,r,n,i)}#b(e,t){let r=e.getOriginal(),n=t.getOriginal(),i=0;for(let a of e.values())if(!(this.preScale(r,a)<1))for(let u of t.values()){if(this.preScale(n,u)<1)continue;let m=1024,l=1024,c=1024,f=0,b=0;this.#t&&(m=a.differenceFrom(u,1),f+=m,b+=1),this.#r&&(l=a.differenceFrom(u,2),f+=l,b+=1),this.#n&&(c=a.differenceFrom(u,3),f+=c,b+=1);let h=f/b;i<h&&(i=h)}let o=i/r.differenceFrom(n);o<this.#i&&(this.#i=o)}validateMaxDiff(){if(!Number.isNaN(this.#s))return;ce.DEBUG&&console.log("RelationFactory: Ratio to trichromacy: "+this.#i);let e=0;for(let[t,r]of this.#e.getAdjacencies()){if(t===this.#c||r===this.#c||this.#e.isFixed(t)&&this.#e.isFixed(r))continue;let n=this.#e.getDifference(t,r,0),i=1024,o=1024,a=1024,u=0,m=0;this.#t&&(i=this.#e.getDifference(t,r,1),u+=i,m+=1),this.#r&&(o=this.#e.getDifference(t,r,2),u+=o,m+=1),this.#n&&(a=this.#e.getDifference(t,r,3),u+=a,m+=1);let c=u/m,f=Math.abs(n*this.#i-c);e<f&&(e=f)}ce.DEBUG&&console.log("RelationFactory: Max Delta Distance: "+e),this.#s=e}sepScale(e,t,r){let n=1024,i=1024,o=1024,a=0,u=0;this.#t&&(n=e.differenceFrom(t,1),a+=n,u+=1),this.#r&&(i=e.differenceFrom(t,2),a+=i,u+=1),this.#n&&(o=e.differenceFrom(t,3),a+=o,u+=1);let l=Math.min(n,i,o);return 1-Math.abs(r-l)/this.#s}preScale(e,t){if(e.getColor().asInteger()===t.getColor().asInteger()||!this.#u&&!this.#l)return 1;let[r,n,i]=e.tone,[o,a,u]=t.tone,m=1024,l=1024,c=0,f=0;if(this.#u){let p=Math.abs(o-r);m=1-(Math.min(p,24-p)-this.#o)/(this.#a-this.#o),c+=m,f+=1}return this.#l&&(l=1-(Math.sqrt((a-n)*(a-n)+(u-i)*(u-i))-this.#m)/(this.#f-this.#m),c+=l,f+=1),Math.min(m,l)}},kt=class{#e;#t;#r;#n;#i;#s;#u;constructor(e,t,r,n,i){this.#e=e,this.#t=i,this.#r=r,this.#n=n,this.#i=r.getOriginal(),this.#s=n.getOriginal(),this.#u=this.#i.differenceFrom(this.#s)*t}satisfactionDegree(e,t){this.#e.validateMaxDiff();let r=this.#r.values()[e],n=this.#n.values()[t],i=this.#o(this.#e.sepScale(r,n,this.#u)),o=this.#t===0?1:this.#o(this.#e.preScale(this.#i,r)),a=this.#t===1?1:this.#o(this.#e.preScale(this.#s,n));return Math.min(i,o,a)}#o(e){return 1/(1+Math.exp(-9.19*(e-.5)))}};var Xe=class s{static DEBUG=!1;#e;#t;#r;#n;#i;#s;#u;constructor(e,t){this.#e=e,this.#t=t.getResolution(),this.#r=t.doPreserveHue(),this.#n=t.doPreserveTone(),this.#i=t.getMaximumHueDifference(),this.#s=t.getMaximumToneDifference(),this.#u=t.getMaximumDifference()}build(e=-1){let t=[],r=this.#o(this.#e.getAdjacencyTable(e));if(e===-1)for(let n=0;n<this.#e.size();++n){let i=new N;if(!this.#e.isFixed(n)){let o=r.getGrids(n,this.#t);for(let a of o){let u=D.newInstance(a);u!==null&&this.#a(n,u)&&i.values().push(u)}}if(!i.values().length){let o=this.#e.getColor(n).asLab(),a=D.newInstance(o);a!==null&&i.values().push(a)}t.push(i)}else{let n=null;for(let i=0;i<this.#e.size();++i){if(i===e){t.push(null);continue}let o=new N,a=new N;if(!this.#e.isFixed(i)){let u=r.getGrids(i,this.#t);for(let m of u){let l=D.newInstance(m);l!==null&&(this.#a(i,l)&&o.values().push(l),a.values().push(l))}}if(!o.values().length){let u=this.#e.getColor(i).asLab(),m=D.newInstance(u);m!==null&&o.values().push(m)}t.push(o),(n==null||n.values().length<a.values().length)&&(n=a)}t[e]=n}if(s.DEBUG)for(let n of t)console.log("Candidate size: "+n.values().length);return this.#l(t),t}#o(e){let t=new I(0,100,-127,127,-127,127);for(let r=0;r<this.#e.size();++r)t.addSite(this.#e.getColor(r).asLab());return t.createCells(e),t}#a(e,t){if(this.#u<this.#e.getColor(e).differenceFrom(t.getColor()))return!1;let r=this.#e.getColor(e).asTone(),n=t.getColor().asTone();if(this.#r){let i=Math.abs(n[0]-r[0]),o=Math.min(i,24-i);if(this.#i<o)return!1}if(this.#n){let i=(r[1]-n[1])*(r[1]-n[1])+(r[2]-n[2])*(r[2]-n[2]);if(this.#s*this.#s<i)return!1}return!0}#l(e){if(s.DEBUG)for(let t of e)console.log("DomainFactory: Candidate Size: "+t.values().length)}};var ce=class s{static DEBUG=!0;#e=new pe;#t=[];#r;#n;#i;constructor(e=null){e&&(this.#e=e)}getParameters(){return this.#e}setParameters(e){this.#e=e}addListener(e){this.#t.push(e)}removeListener(e){let t=this.#t.indexOf(e);t!==-1&&this.#t.splice(t,1)}adjust(e){this.#r=e;let t;this.#e.isBottleneckResolved()?t=this.#u(this.#r.getBottleneckIndex()):t=this.#s(),e.setQualityInternally(t.worstSatisfactionDegree());let r=this.#o(t);try{if(!r.solve())return s.DEBUG&&console.log("Adjuster: No solution found."),null}catch(n){return s.DEBUG&&console.log("Adjuster: Exception occurred: "+n.toString()),null}return this.#i}#s(){let e;this.#e.isRatioModeEnabled()?(e=new we(this.#r,this.#e),this.#n=new B(this.#r,this.#e).build()):(e=new ve(this.#r,this.#e),this.#n=new Xe(this.#r,this.#e).build());let t=new te;for(let r of this.#n)t.createVariable({name:"v",domain:t.createDomain({min:0,max:r.values().length-1}),value:0});for(let[r,n]of this.#r.getAdjacencies()){if(this.#r.isFixed(r)&&this.#r.isFixed(n))continue;let i=-1;this.#r.isFixed(r)&&(i=0),this.#r.isFixed(n)&&(i=1),t.createConstraint({relation:e.newInstance(r,n,this.#n[r],this.#n[n],i),variables:[t.variableAt(r),t.variableAt(n)]})}return t}#u(e){let t;this.#e.isRatioModeEnabled()?(t=new we(this.#r,this.#e,e),this.#n=new B(this.#r,this.#e).build(e)):(t=new ve(this.#r,this.#e),this.#n=new Xe(this.#r,this.#e).build(e));let r=new te;for(let n of this.#n)r.createVariable({name:"v",domain:r.createDomain({min:0,max:n.values().length-1}),value:0});for(let[n,i]of this.#r.getAdjacencies()){if(this.#r.isFixed(n)&&this.#r.isFixed(i))continue;let o=-1;(n==e||this.#r.isFixed(n))&&(o=0),(i==e||this.#r.isFixed(i))&&(o=1),r.createConstraint({relation:t.newInstance(n,i,this.#n[n],this.#n[i],o),variables:[r.variableAt(n),r.variableAt(i)]})}return r}#o(e){let t;switch(this.#e.getSolverType()){case 0:default:t=new be(e),t.setUsingMinimumRemainingValuesHeuristics(!0),t.setIncrementStepOfWorstSatisfactionDegree(.05);break;case 1:t=new re(e),t.setRandomness(!1);break;case 2:t=new he(e),t.setRandomness(!1);break}return t.setTimeLimit(this.#e.getTimeLimit()),t.setTargetRate(this.#e.getTargetDesirability()),t.addListener((r,n)=>this.#a(r,n)),t}#a(e,t){let r=[];for(let i=0;i<this.#r.size();++i){let o=e.at(i).value(),a=this.#n[i].values()[o];r.push(a.getColor().asInteger())}this.#i=new Ee(r,this.#r.getAdjacencies(),null,t);let n=t>.999;for(let i of this.#t)i(this.#i,t)&&(n=!0);return n}};export{ce as Adjuster,pe as Parameters,Ee as Scheme,ht as SolverType};
//# sourceMappingURL=cosaf.min.js.map
